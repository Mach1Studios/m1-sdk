{"version":3,"sources":["webpack:///webpack/bootstrap 178faae637f1d12e4f1b?bc67*","webpack:///../~/promise-decode-audio-data/index.js?786b","webpack:///./mPoint?2a29","webpack:///./_mainJs.js","webpack:///../~/webpack/buildin/global.js?62a6","webpack:///./sound.js?04d3","webpack:///node_modules/browserify/~/browser-pack/_prelude.js?5405","webpack:///node_modules/iphone-inline-video/dist/iphone-inline-video.common-js.js?f16d","webpack:///src/scripts/lib/Canvas.js?4663","webpack:///src/scripts/lib/Detector.js?b6d3","webpack:///src/scripts/lib/HelperCanvas.js?9eae","webpack:///src/scripts/lib/MobileBuffering.js?3896","webpack:///src/scripts/lib/Notice.js?f00a","webpack:///src/scripts/lib/Util.js?bc5b","webpack:///src/scripts/plugin.js?41bd","webpack:///src/scripts/plugin_v5.js?c686","webpack:///external \"$\"?57aa","webpack:///external \"THREE\"?0b49","webpack:///external \"videojs\"?9fc4","webpack:///./channelAlg.js?bead","webpack:///../~/base-audio-context/index.js?219a"],"names":["videojs","require","THREE","$","eightChannelsAlgorithm","FRAMES_PER_SECOND","delay","cb","time","timerId","setTimeout","stop","clearTimeout","now","audioFiles4","src","name","audioFiles8","audio","side","posH","posFB","posLR","push","console","log","sound","window","document","ready","player","thus","isPlayBeforeSeeking","isVideoReady","Sound","videoElement","getElementById","width","offsetWidth","height","offsetHeight","volume","panorama","clickAndDrag","showNotice","backToVerticalCenter","backToHorizonCenter","callback","on","pause","rewind","currentTime","play","updateVolumes","getChild","vector","Vector3","camera","getWorldDirection","alpha","Math","asin","y","PI","theta","atan2","x","z","__timeoutUpdateVolumes","Play","isReady","__playTimeout","__cb","audioFiles","left","right","_volumes","loaded","loadedCount","isPlay","isSoundReady","maxPhaseError","preloadAudio","i","Audio","addEventListener","loadedAudio","length","innerHTML","Sound3D_OldVersion","angle","volumes","min","abs","setVolumeOnSide","hasOwnProperty","warn","getVolumes","setVolumes","duration","getAudio","yaw","pitch","roll","vols","setInterval","max","pos","cameraRotationAngle","POS_Y_H_SPHERE","SPHERE_DIAMETER","animate","requestAnimationFrame","render","SCREEN_WIDTH","SCREEN_HEIGHT","container","scene","renderer","grid","cameraRig","cameraPerspective","cameraPerspectiveHelper","cameraOrtho","cameraOrthoHelper","geometry","SphereGeometry","materialRight","MeshBasicMaterial","color","materialLeft","sphere","init","Scene","PerspectiveCamera","fov","CameraHelper","add","position","lookAt","OrthographicCamera","rotation","Object3D","set","Mesh","GridHelper","material","transparent","setColors","WebGLRenderer","antialias","setClearColor","setSize","domElement","style","appendChild","autoClear","onWindowResize","event","aspect","updateProjectionMatrix","__DELETE_THIS____animate","update","visible","scale","rotateOnAxis","normalize","clear","opacity","setViewport","SOUND_COUNT","preloadCache","initArray","count","arr","forEach","el","audioCtx","AudioContext","smp","gainNode","pannerNode","buffer","countOfReadySound","isDelete","startTime","stopTime","preload","path","fetch","method","responseType","cache","then","res","arrayBuffer","blob","Promise","resolve","decodeAudioData","aBuffer","floor","timeEnd","catch","err","createAudio","j","createBufferSource","createGain","gain","value","createPanner","setPosition","panningModel","connect","destination","start","disconnect","remove","module","exports","Point","__FLT_EPSILON__","mmap","inputMin","inputMax","outputMin","outputMax","isClamp","outVal","clamp","a","alignAngle","coefficients","tiltHigh","tiltLow","result","pitchHigherHalf","pitchLowerHalf","eightPairsAlgorithm"],"mappings":";;AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA,mDAA2C,cAAc;;AAEzD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAK;AACL;AACA;;AAEA;AACA;AACA;AACA,mCAA2B,0BAA0B,EAAE;AACvD,yCAAiC,eAAe;AAChD;AACA;AACA;;AAEA;AACA,8DAAsD,+DAA+D;;AAErH;AACA;;AAEA;AACA;;;;;;;;;AChEA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA,wDAAwD,eAAe;AACvE,GAAG;;AAEH;AACA;;AAEA;AACA;AACA;AACA;AACA,OAAO;;AAEP;;AAEA;AACA;;AAEA;AACA;AACA;;;;;;;;;;ACrCA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,0BAA0B;AAC1B,YAAY;AACZ;AACA;AACA;AACA;AACA,eAAe,cAAc;;AAE7B;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,YAAY,OAAO;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,YAAY,MAAM;AAClB;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,YAAY,MAAM;AAClB;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,YAAY,MAAM;AAClB;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,YAAY,OAAO;AACnB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,YAAY,MAAM;AAClB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,YAAY,MAAM;AAClB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,YAAY,MAAM;AAClB;AACA;AACA;AACA;;;;AAIA,uB;;;;;;;;AC5LA;;AAEA,IAAIA,UAAU,mBAAAC,CAAQ,EAAR,CAAd;AACA,mBAAAA,CAAQ,EAAR;AACA,IAAIC,QAAQ,mBAAAD,CAAQ,EAAR,CAAZ;AACA,IAAIE,IAAI,mBAAAF,CAAQ,EAAR,CAAR;;AAEA,IAAMG,yBAAyB,mBAAAH,CAAQ,EAAR,EAAmBG,sBAAlD;;AAEA,IAAMC,oBAAoB,EAA1B;;AAEA,SAASC,KAAT,CAAeC,EAAf,EAAmBC,IAAnB,EACA;AACC,KAAIC,UAAUC,WAAWH,EAAX,EAAeC,IAAf,CAAd;;AAEA,UAASG,IAAT,GAAgB;AACfC,eAAaH,OAAb;AACA;;AAED,UAASI,GAAT,GAAe;AACdN;;AAEAI;AACA;;AAED,QAAO;AACNA,QAAMA,IADA;AAENE,OAAKA;AAFC,EAAP;AAIA;;AAED,IAAMC,cAAc,CAAC;AACpBC,MAAK,iBADe;AAEpBC,OAAM;AAFc,CAAD,EAGjB;AACFD,MAAK,iBADH;AAEFC,OAAM;AAFJ,CAHiB,EAMjB;AACFD,MAAK,iBADH;AAEFC,OAAM;AAFJ,CANiB,EASjB;AACFD,MAAK,iBADH;AAEFC,OAAM;AAFJ,CATiB,CAApB;;AAcA,IAAMC,cAAe,YAAY;AAChC,KAAIC,QAAQ,EAAZ;;AADgC,YAGf,CAAC,MAAD,EAAS,OAAT,CAHe;AAGhC,0CACA;AADK,MAAIC,eAAJ;AAEJD,QAAMC,IAAN,IAAc,EAAd;;AADD,cAGkB,CAAC,GAAD,EAAM,GAAN,CAHlB;AAGC,+CACA;AADK,OAAIC,iBAAJ,CACL,YACmB,CAAC,GAAD,EAAM,GAAN,CADnB;;AACC,gDACA;AADK,QAAIC,kBAAJ,CACL;AAAA;AAAA;;AAAA;AACC,2BAAmBA,SAAS,GAAT,GAAe,CAAC,GAAD,EAAM,GAAN,CAAf,GAA4B,CAAC,GAAD,EAAM,GAAN,CAA/C,+HACA;AAAA,UADSC,KACT;;AACCJ,YAAMC,IAAN,EAAYI,IAAZ,CAAiB;AAChBR,YAAK,iBADW,EACQ;AACxBC,aAAMG,OAAO,GAAP,GAAaG,KAAb,GAAqBD,KAArB,GAA6BD;AAFnB,OAAjB;AAIA;AAPF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAQC;AACD;AACD;;AAEDI,SAAQC,GAAR,CAAYP,KAAZ;;AAEA,QAAOA,KAAP;AACA,CAzBmB,EAApB;;AA4BA,IAAIQ,cAAJ;;AAEA;AACAC,OAAOD,KAAP,GAAeA,KAAf;AACA;;;AAGAvB,EAAEyB,QAAF,EAAYC,KAAZ,CAAkB,YAAY;AAC7B,KAAIC,SAASH,OAAOG,MAAP,GAAgB9B,QAAQ,yBAAR,EAAmC,EAAnC,EAAuC,YAAW;AAC9E,MAAI+B,OAAO,IAAX;;AAEA,MAAIC,sBAAsB,KAA1B;AACA,MAAIC,eAAe,KAAnB;;AAEAP,UAAQ,IAAIQ,KAAJ,CAAUjB,WAAV,EAAuBa,MAAvB,CAAR;;AAEA,MAAIK,eAAeP,SAASQ,cAAT,CAAwB,yBAAxB,CAAnB;AACA,MAAIC,QAAQF,aAAaG,WAAzB;AACA,MAAIC,SAASJ,aAAaK,YAA1B;;AAEA,OAAKH,KAAL,CAAWA,KAAX;AACA,OAAKE,MAAL,CAAYA,MAAZ;;AAEA,OAAKE,MAAL,CAAY,CAAZ;;AAEA,OAAKC,QAAL,CAAc;AACbC,iBAAc,IADD;AAEbC,eAAY,KAFC;AAGbC,yBAAsB,KAHT;AAIbC,wBAAqB,KAJR;AAKb;AACAC,aAAU,oBAAW;AACpBd,mBAAe,IAAf;AACA;AARY,GAAd;;AAWA,OAAKe,EAAL,CAAQ,OAAR,EAAiB,YAAY;AAC5BtB,SAAMuB,KAAN;AACA,GAFD;;AAKA,OAAKD,EAAL,CAAQ,QAAR,EAAkB,YAAW;AAC5B1C,SAAM,YAAW;AAChBoB,UAAMwB,MAAN,CAAanB,KAAKoB,WAAL,EAAb;AACA,IAFD,EAEG,GAFH;AAGA,GAJD;;AAMA,OAAKH,EAAL,CAAQ,MAAR,EAAgB,YAAW;AAC1BtB,SAAM0B,IAAN;AACA,GAFD;;AAIA,WAASC,aAAT,GAAyB;AACxB,OAAItB,KAAKuB,QAAL,CAAc,QAAd,CAAJ,EACA;AACC,QAAIC,SAAS,IAAIrD,MAAMsD,OAAV,EAAb;;AAEAzB,SAAKuB,QAAL,CAAc,QAAd,EAAwBG,MAAxB,CAA+BC,iBAA/B,CAAiDH,MAAjD;AACA,QAAII,QAAQC,KAAKC,IAAL,CAAUN,OAAOO,CAAjB,IAAsB,GAAtB,GAA4BF,KAAKG,EAA7C;AACA,QAAIC,QAAQJ,KAAKK,KAAL,CAAWV,OAAOW,CAAlB,EAAqBX,OAAOY,CAA5B,IAAiC,GAAjC,GAAuCP,KAAKG,EAA5C,GAAiD,EAA7D;;AAEA,QAAIC,QAAQ,CAAZ,EACCA,QAAQ,MAAMA,KAAd;;AAEDtC,UAAM2B,aAAN,CAAoB,CAACW,KAArB,EAA4B,CAACL,KAA7B;AACA;AACD;;AAEDjD,aAAW,SAAS0D,sBAAT,GAAiC;AAC3Cf;;AAEA3C,cAAW0D,sBAAX,EAAmC,OAAO/D,iBAA1C;AACA,GAJD,EAIG,OAAOA,iBAJV;;AAOA,WAASgE,IAAT,GAAgB;AACf,OAAIpC,gBAAgB,IAAhB,IAAwBP,MAAM4C,OAAN,MAAmB,IAA/C,EAAqD;AACpD5C,UAAM0B,IAAN;AACAtB,WAAOsB,IAAP;AACA;AACD;;AAED1C,aAAW,SAAS6D,aAAT,GAAyB;AACnC,OAAItC,gBAAgB,IAAhB,IAAwBP,MAAM4C,OAAN,MAAmB,IAA/C,EACA;AACCD;AACA,IAHD,MAKA;AACC3D,eAAW6D,aAAX,EAA0B,GAA1B;AACA;AACD,GATD,EASG,GATH;;AAWAC,OAAKzC,IAAL,EAAWL,KAAX;AACA,EArF4B,CAA7B;AAuFA,CAxFD;;AA2FA,SAASQ,KAAT,CAAeuC,UAAf,EAA2B3C,MAA3B,EAAmC;AAClC,KAAIZ,QAAQ;AACXwD,QAAM,CAAC,CAAD,CADK;AAEXC,SAAO,CAAC,CAAD;AAFI,EAAZ;;AAKA,KAAIC,WAAW;AACdF,QAAM,CAAC,CAAD,CADQ;AAEdC,SAAO,CAAC,CAAD;AAFO,EAAf;AAIA,KAAIE,SAAS,KAAb;AACA,KAAIC,cAAc,CAAlB;;AAEA,KAAIC,SAAS,KAAb;AACA,KAAIC,eAAe,KAAnB;;AAEA,KAAIC,gBAAgB,CAApB;;AAEA,UAASC,YAAT,CAAsBC,CAAtB,EAAyBhE,IAAzB,EAA+B;AAC9BD,QAAMC,IAAN,EAAYgE,CAAZ,IAAiB,IAAIC,KAAJ,EAAjB;AACAlE,QAAMC,IAAN,EAAYgE,CAAZ,EAAeE,gBAAf,CAAgC,gBAAhC,EAAkDC,WAAlD,EAA+D,KAA/D;AACApE,QAAMC,IAAN,EAAYgE,CAAZ,EAAepE,GAAf,GAAqB0D,WAAWtD,IAAX,EAAiBgE,CAAjB,EAAoBpE,GAAzC;AACA;;AAED,UAASuE,WAAT,GAAuB;AACtB,MAAI,CAACT,MAAL,EAAa;AACZC;AACAD,YAAUC,eAAeL,WAAWC,IAAX,CAAgBa,MAAhB,GAAyBd,WAAWE,KAAX,CAAiBY,MAAnE;;AAEAP,kBAAeH,MAAf;AACAjD,YAASQ,cAAT,CAAwB,QAAxB,EAAkCoD,SAAlC,GAA8C,aAAc,MAAMV,WAAN,IAAqBL,WAAWC,IAAX,CAAgBa,MAAhB,GAAyBd,WAAWE,KAAX,CAAiBY,MAA/D,CAA5D;AACA;AACD;;AAED,UAASE,kBAAT,CAA4BC,KAA5B,EAAmC;AAClC,MAAIC,UAAU,CAAC,GAAD,EAAM,GAAN,EAAW,GAAX,EAAgB,GAAhB,CAAd;;AAEAA,UAAQ,CAAR,IAAa,MAAM/B,KAAKgC,GAAL,CAAS,GAAT,EAAchC,KAAKgC,GAAL,CAAS,MAAMF,KAAf,EAAsBA,KAAtB,IAA+B,IAA7C,CAAnB;AACAC,UAAQ,CAAR,IAAa,MAAM/B,KAAKgC,GAAL,CAAS,GAAT,EAAchC,KAAKiC,GAAL,CAAS,KAAKH,KAAd,EAAqBA,KAArB,IAA8B,IAA5C,CAAnB;AACAC,UAAQ,CAAR,IAAa,MAAM/B,KAAKgC,GAAL,CAAS,GAAT,EAAchC,KAAKiC,GAAL,CAAS,MAAMH,KAAf,EAAsBA,KAAtB,IAA+B,IAA7C,CAAnB;AACAC,UAAQ,CAAR,IAAa,MAAM/B,KAAKgC,GAAL,CAAS,GAAT,EAAchC,KAAKiC,GAAL,CAAS,MAAMH,KAAf,EAAsBA,KAAtB,IAA+B,IAA7C,CAAnB;;AAEA,SAAOC,OAAP;AACA;;AAED,UAASG,eAAT,CAAyBH,OAAzB,EAAkCxE,IAAlC,EAAwC;AACvC,OAAK,IAAIgE,CAAT,IAAcQ,QAAQxE,IAAR,CAAd,EACA;AACC,OAAIwE,QAAQxE,IAAR,EAAc4E,cAAd,CAA6BZ,CAA7B,CAAJ,EACA;AACC,QAAIQ,QAAQxE,IAAR,EAAcgE,CAAd,IAAmB,CAAnB,IAAwBQ,QAAQxE,IAAR,EAAcgE,CAAd,IAAmB,CAA/C,EACA;AACC3D,aAAQwE,IAAR,CAAa,iCAAiCL,OAA9C;;AAEA;AACA;AACD;AACD;;AAED,OAAK,IAAIR,GAAT,IAAcjE,MAAMC,IAAN,CAAd,EACA;AACCD,SAAMC,IAAN,EAAYgE,GAAZ,EAAe1C,MAAf,GAAwBkD,QAAQxE,IAAR,EAAcgE,GAAd,CAAxB;AACA;AACD;;AAED,UAASc,UAAT,GAAsB;AACrB,SAAOrB,QAAP;AACA;;AAED,UAASsB,UAAT,GACA;AAAA,MADoBP,OACpB,uEAD8Bf,QAC9B;;AACCkB,kBAAgBH,OAAhB,EAAyB,MAAzB;AACAG,kBAAgBH,OAAhB,EAAyB,OAAzB;;AAEAf,aAAWe,OAAX;;AAEA,SAAOM,YAAP;AACA;;AAED,UAAS/C,MAAT,CAAgB1C,IAAhB,EAAsB;AACrB,MAAIA,OAAO,CAAX,EACA;AACCG;;AAEA;AACA;;AANoB,cAQJ,CAAC,MAAD,EAAS,OAAT,CARI;AAQrB,+CACA;AADK,OAAIQ,iBAAJ;AAEJ,QAAK,IAAIgE,CAAT,IAAcjE,MAAMC,IAAN,CAAd,EACA;AACC,QAAID,MAAMC,IAAN,EAAYgE,CAAZ,EAAegB,QAAf,GAA0B3F,IAA9B,EAAoC;AACnCgB,aAAQwE,IAAR,CAAa,0BAA0BxF,IAA1B,GAAiC,KAAjC,GAAyCiE,WAAWtD,IAAX,EAAiBgE,CAAjB,EAAoBnE,IAA7D,GAAoE,cAApE,GAAqFE,MAAMC,IAAN,EAAYgE,CAAZ,EAAegB,QAAjH;AACAxF;;AAEA;AACA;AACDO,UAAMC,IAAN,EAAYgE,CAAZ,EAAehC,WAAf,GAA6B3C,IAA7B;AACA;AACD;AACD;;AAED,UAAS4F,QAAT,GAAoB;AACnB,SAAOlF,KAAP;AACA;;AAED,UAASkC,IAAT,GAAgB;AACf,MAAI,CAAC2B,MAAL,EACA;AAAA,eACkB,CAAC,MAAD,EAAS,OAAT,CADlB;;AACC,gDACA;AADK,QAAI5D,iBAAJ;AAEJ,SAAK,IAAIgE,CAAT,IAAcjE,MAAMC,IAAN,CAAd,EACA;AACCD,WAAMC,IAAN,EAAYgE,CAAZ,EAAe/B,IAAf;AACA;AACD;;AAED2B,YAAS,IAAT;AACA;AACD;;AAED,UAAS9B,KAAT,GAAiB;AAChB,MAAI8B,MAAJ,EACA;AAAA,eACkB,CAAC,MAAD,EAAS,OAAT,CADlB;;AACC,gDACA;AADK,QAAI5D,iBAAJ;AAEJ,SAAK,IAAIgE,CAAT,IAAcjE,MAAMC,IAAN,CAAd,EACA;AACCD,WAAMC,IAAN,EAAYgE,CAAZ,EAAelC,KAAf;AACA;AACD;;AAED8B,YAAS,KAAT;AACA;AACD;;AAED,UAASpE,IAAT,GAAgB;AACfuC,SAAO,CAAP;AACAD;AACA;;AAED,UAASqB,OAAT,GAAmB;AAClB,SAAOU,YAAP;AACA;;AAED,UAAS3B,aAAT,CAAuBgD,GAAvB,EAA4BC,KAA5B,EACA;AAAA,MADmCC,IACnC,uEAD0C,CAC1C;;AACC,MAAIC,OAAOpG,uBAAuBiG,GAAvB,EAA4BC,KAA5B,EAAmCC,IAAnC,CAAX;;AAEA,OAAK,IAAIpB,IAAI,CAAb,EAAgBA,IAAI,CAApB,EAAuB,EAAEA,CAAzB,EACA;AACCP,YAASF,IAAT,CAAcS,CAAd,IAAmBqB,KAAK,IAAIrB,CAAT,CAAnB;AACA;;AAED,OAAK,IAAIA,MAAI,CAAb,EAAgBA,MAAI,CAApB,EAAuB,EAAEA,GAAzB,EACA;AACCP,YAASD,KAAT,CAAeQ,GAAf,IAAoBqB,KAAK,IAAIrB,GAAJ,GAAQ,CAAb,CAApB;AACA;;AAEDe;AACA;;AAED;AACA,MAAK,IAAIf,CAAT,IAAcV,WAAWC,IAAzB,EAA+B;AAC9BQ,eAAaC,CAAb,EAAgB,MAAhB;AACA;AACD,MAAK,IAAIA,GAAT,IAAcV,WAAWE,KAAzB,EAAgC;AAC/BO,eAAaC,GAAb,EAAgB,OAAhB;AACA;;AAEDsB,aAAY,YAAW;AACtB,MAAI5B,MAAJ,EAAY;AACX,OAAIe,MAAM,IAAV,CADW,CACK;AAChB,OAAIc,MAAM,CAAV;;AAEA9E,YAASQ,cAAT,CAAwB,QAAxB,EAAkCoD,SAAlC,GAA8C,oBAA9C;;AAJW,eAMM,CAAC,MAAD,EAAS,OAAT,CANN;AAMX,mDACA;AADK,QAAIrE,kBAAJ;AAEJ,SAAK,IAAIgE,IAAT,IAAcjE,MAAMC,IAAN,CAAd,EACA;AACC,SAAIwF,MAAMzF,MAAMC,IAAN,EAAYgE,IAAZ,EAAehC,WAAzB;AACA,SAAIwD,MAAMf,GAAV,EAAeA,MAAMe,GAAN;AACf,SAAIA,MAAMD,GAAV,EAAeA,MAAMC,GAAN;;AAEf/E,cAASQ,cAAT,CAAwB,QAAxB,EAAkCoD,SAAlC,IAA+Cf,WAAWtD,IAAX,EAAiBgE,IAAjB,EAAoBnE,IAApB,GAA2B,IAA3B,GAAkC2F,GAAlC,GAAwC,aAAxC,GAAwDzF,MAAMC,IAAN,EAAYgE,IAAZ,EAAe1C,MAAvE,GAAgF,OAA/H;AACA;AACD;;AAED,OAAI,CAACiE,MAAMd,GAAP,IAAc,IAAd,GAAqBX,aAAzB,EACA;AACCA,oBAAgB,CAACyB,MAAMd,GAAP,IAAc,IAA9B;AACA;;AAEDhE,YAASQ,cAAT,CAAwB,QAAxB,EAAkCoD,SAAlC,IAA+C,UAAU,oBAAV,GAAiC,CAACkB,MAAMd,GAAP,IAAc,IAA/C,GAAsD,SAArG;AACAhE,YAASQ,cAAT,CAAwB,QAAxB,EAAkCoD,SAAlC,IAA+C,sBAAsBP,aAAtB,GAAsC,SAArF;AACArD,YAASQ,cAAT,CAAwB,QAAxB,EAAkCoD,SAAlC,IAA+C,kBAAkB1D,OAAOqB,WAAP,EAAlB,GAAyC,SAAxF;AACAvB,YAASQ,cAAT,CAAwB,QAAxB,EAAkCoD,SAAlC,IAA+C,yBAC9C,CAAC1D,OAAOqB,WAAP,KAAuBjC,MAAM,MAAN,EAAc,CAAd,EAAiBiC,WAAzC,IAAwD,IADV,GACiB,SADhE;AAGA;AACD,EA/BD,EA+BG,GA/BH;;AAiCA,QAAO;AACN+C,cAAYA,UADN;AAEND,cAAYA,UAFN;AAGN5C,iBAAeA,aAHT;AAINoC,sBAAoBA,kBAJd;AAKNW,YAAUA,QALJ;AAMNhD,QAAMA,IANA;AAONH,SAAOA,KAPD;AAQNC,UAAQA,MARF;AASNvC,QAAMA,IATA;AAUN2D,WAASA;AAVH,EAAP;AAYA;;AAGD,SAASE,IAAT,CAAc1C,MAAd,EAAsBJ,KAAtB,EAA6B;AAC5B,KAAIkF,sBAAsB,CAAC,CAAD,EAAI,CAAJ,CAA1B;;AAEA,KAAMC,iBAAiB,GAAvB;AACA,KAAMC,kBAAkB,GAAxB;;AAEA,UAASC,OAAT,GAAmB;AAClBrG,aAAW,YAAY;AACtBsG,yBAAsBD,OAAtB;;AAEA,OAAIjF,OAAOwB,QAAP,CAAgB,QAAhB,CAAJ,EACA;AACC,QAAIC,SAAS,IAAIrD,MAAMsD,OAAV,EAAb;;AAEA1B,WAAOwB,QAAP,CAAgB,QAAhB,EAA0BG,MAA1B,CAAiCC,iBAAjC,CAAmDH,MAAnD;AACA,QAAII,QAAQC,KAAKC,IAAL,CAAUN,OAAOO,CAAjB,IAAsB,GAAtB,GAA4BF,KAAKG,EAA7C;AACA,QAAIC,QAAQJ,KAAKK,KAAL,CAAWV,OAAOW,CAAlB,EAAqBX,OAAOY,CAA5B,IAAiC,GAAjC,GAAuCP,KAAKG,EAA5C,GAAiD,EAA7D;;AAEA,QAAIC,QAAQ,CAAZ,EAAeA,QAAQ,MAAMA,KAAd;;AAEf;;AAEA4C,0BAAqB,CAAC5C,KAAD,EAAQL,KAAR,CAArB;AACD,IAbA,MAeA;AACCnC,YAAQwE,IAAR,CAAa,mCAAb;;AAEAY,0BAAsB,CAAC,CAAD,EAAI,CAAJ,CAAtB;AACA;AACD;;AAEAK;AACA,GA1BD,EA0BG,OAAO5G,iBA1BV;AA2BA;;AAED,KAAI6G,eAAe/G,EAAE,SAAF,EAAakC,KAAb,EAAnB;AACA,KAAI8E,gBAAgBhH,EAAE,SAAF,EAAaoC,MAAb,EAApB;;AAEA,KAAI6E,kBAAJ;AACA,KAAI3D,eAAJ;AAAA,KAAY4D,cAAZ;AAAA,KAAmBC,iBAAnB;AAAA,KAA6BC,aAA7B;AACA,KAAIC,kBAAJ;AACA,KAAIC,0BAAJ;AACA,KAAIC,gCAAJ;;AAEA,KAAIC,oBAAJ;AAAA,KAAiBC,0BAAjB;;AAEA,KAAIC,WAAW,IAAI3H,MAAM4H,cAAV,CAAyBhB,eAAzB,EAA0C,EAA1C,EAA8C,EAA9C,CAAf;AACA,KAAIiB,gBAAgB,IAAI7H,MAAM8H,iBAAV,CAA4B;AAC/CC,SAAO,QADwC,CAC/B;AAD+B,EAA5B,CAApB;AAGA,KAAIC,eAAe,IAAIhI,MAAM8H,iBAAV,CAA4B;AAC9CC,SAAO,QADuC,CAC9B;AAD8B,EAA5B,CAAnB;;AAIA,KAAIE,SAAS;AACZzD,QAAM,EADM;AAEZC,SAAO;AAFK,EAAb;;AAKA,KAAIgC,MAAM,CACT,CAAC,CAAC,CAAF,EAAK,CAAC,CAAN,CADS,EACC;AACV,EAAC,CAAD,EAAI,CAAC,CAAL,CAFS,EAEA;AACT,EAAC,CAAC,CAAF,EAAK,CAAL,CAHS,EAGA;AACT,EAAC,CAAD,EAAI,CAAJ,CAJS,CAAV;;AAOAyB;AACArB;;AAEA,UAASqB,IAAT,GAAgB;;AAEfhB,cAAYxF,SAASQ,cAAT,CAAwB,QAAxB,CAAZ;AACA;AACA;;AAEAiF,UAAQ,IAAInH,MAAMmI,KAAV,EAAR;;AAEAZ,sBAAoB,IAAIvH,MAAMoI,iBAAV,CAA4B,EAA5B,EAAgCpB,eAAeC,aAA/C,EAA8D,GAA9D,EAAmE,IAAnE,CAApB;AACAM,oBAAkBc,GAAlB,GAAwB,EAAxB;;AAEAb,4BAA0B,IAAIxH,MAAMsI,YAAV,CAAuBf,iBAAvB,CAA1B;AACAJ,QAAMoB,GAAN,CAAUf,uBAAV;;AAEAjE,WAAS,IAAIvD,MAAMoI,iBAAV,CAA4B,EAA5B,EAAgCpB,eAAeC,aAA/C,EAA8D,CAA9D,EAAiE,KAAjE,CAAT;AACA1D,SAAOiF,QAAP,CAAgB5E,CAAhB,GAAoB,IAApB;AACAL,SAAOiF,QAAP,CAAgBvE,CAAhB,GAAoB,IAApB;AACAV,SAAOkF,MAAP,CAAclB,kBAAkBiB,QAAhC;;AAEA;AACAf,gBAAc,IAAIzH,MAAM0I,kBAAV,CAA6B,MAAM1B,YAAN,GAAqB,CAAC,CAAnD,EAAsD,MAAMA,YAAN,GAAqB,CAA3E,EAA8EC,gBAAgB,CAA9F,EAAiGA,gBAAgB,CAAC,CAAlH,EAAqH,GAArH,EAA0H,IAA1H,CAAd;AACAS,sBAAoB,IAAI1H,MAAMsI,YAAV,CAAuBb,WAAvB,CAApB;AACAN,QAAMoB,GAAN,CAAUb,iBAAV;AACA;;AAEA;;AAEAD,cAAYkB,QAAZ,CAAqB/E,CAArB,GAAyBF,KAAKG,EAAL,GAAU,CAAnC;AACA0D,oBAAkBoB,QAAlB,CAA2B/E,CAA3B,GAA+B,CAA/B;;AAEA0D,cAAY,IAAItH,MAAM4I,QAAV,EAAZ;AACAtB,YAAUiB,GAAV,CAAchB,iBAAd;AACAD,YAAUiB,GAAV,CAAcd,WAAd;;AAEA;AACA;;AAEAH,YAAUkB,QAAV,CAAmBK,GAAnB,CAAuB,CAAvB,EAA0B,CAA1B,EAA6B,CAA7B;;AAEA1B,QAAMoB,GAAN,CAAUjB,SAAV;;AAGA,OAAK,IAAIrC,IAAI,CAAb,EAAgBA,IAAI,CAApB,EAAuBA,GAAvB,EAA4B;AAC3BgD,UAAOzD,IAAP,CAAYS,CAAZ,IAAiB,IAAIjF,MAAM8I,IAAV,CAAenB,QAAf,EAAyBK,YAAzB,CAAjB;AACAC,UAAOxD,KAAP,CAAaQ,CAAb,IAAkB,IAAIjF,MAAM8I,IAAV,CAAenB,QAAf,EAAyBE,aAAzB,CAAlB;;AAEAI,UAAOzD,IAAP,CAAYS,CAAZ,EAAeuD,QAAf,CAAwBxE,CAAxB,GAA4B,OAAOyC,IAAIxB,CAAJ,EAAO,CAAP,IAAYwB,IAAIxB,CAAJ,EAAO,CAAP,IAAY,GAA/B,CAA5B;AACAgD,UAAOzD,IAAP,CAAYS,CAAZ,EAAeuD,QAAf,CAAwB5E,CAAxB,GAA4B,CAA5B;AACAqE,UAAOzD,IAAP,CAAYS,CAAZ,EAAeuD,QAAf,CAAwBvE,CAAxB,GAA4B,OAAOwC,IAAIxB,CAAJ,EAAO,CAAP,IAAYwB,IAAIxB,CAAJ,EAAO,CAAP,IAAY,GAA/B,CAA5B;;AAEAgD,UAAOxD,KAAP,CAAaQ,CAAb,EAAgBuD,QAAhB,CAAyBxE,CAAzB,GAA6B,OAAOyC,IAAIxB,CAAJ,EAAO,CAAP,IAAYwB,IAAIxB,CAAJ,EAAO,CAAP,IAAY,GAA/B,CAA7B;AACAgD,UAAOxD,KAAP,CAAaQ,CAAb,EAAgBuD,QAAhB,CAAyB5E,CAAzB,GAA6B,CAA7B;AACAqE,UAAOxD,KAAP,CAAaQ,CAAb,EAAgBuD,QAAhB,CAAyBvE,CAAzB,GAA6B,OAAOwC,IAAIxB,CAAJ,EAAO,CAAP,IAAYwB,IAAIxB,CAAJ,EAAO,CAAP,IAAY,GAA/B,CAA7B;;AAEAkC,SAAMoB,GAAN,CAAUN,OAAOzD,IAAP,CAAYS,CAAZ,CAAV;AACAkC,SAAMoB,GAAN,CAAUN,OAAOxD,KAAP,CAAaQ,CAAb,CAAV;AACA;;AAED,OAAK,IAAIA,OAAI,CAAb,EAAgBA,OAAI,CAApB,EAAuBA,MAAvB,EAA4B;AAC3BgD,UAAOzD,IAAP,CAAYS,IAAZ,IAAiB,IAAIjF,MAAM8I,IAAV,CAAenB,QAAf,EAAyBK,YAAzB,CAAjB;AACAC,UAAOxD,KAAP,CAAaQ,IAAb,IAAkB,IAAIjF,MAAM8I,IAAV,CAAenB,QAAf,EAAyBE,aAAzB,CAAlB;;AAEAI,UAAOzD,IAAP,CAAYS,IAAZ,EAAeuD,QAAf,CAAwBxE,CAAxB,GAA4B,OAAOyC,IAAIxB,OAAI,CAAR,EAAW,CAAX,IAAgBwB,IAAIxB,OAAI,CAAR,EAAW,CAAX,IAAgB,GAAvC,CAA5B;AACAgD,UAAOzD,IAAP,CAAYS,IAAZ,EAAeuD,QAAf,CAAwB5E,CAAxB,GAA4B+C,cAA5B;AACAsB,UAAOzD,IAAP,CAAYS,IAAZ,EAAeuD,QAAf,CAAwBvE,CAAxB,GAA4B,OAAOwC,IAAIxB,OAAI,CAAR,EAAW,CAAX,IAAgBwB,IAAIxB,OAAI,CAAR,EAAW,CAAX,IAAgB,GAAvC,CAA5B;;AAEAgD,UAAOxD,KAAP,CAAaQ,IAAb,EAAgBuD,QAAhB,CAAyBxE,CAAzB,GAA6B,OAAOyC,IAAIxB,OAAI,CAAR,EAAW,CAAX,IAAgBwB,IAAIxB,OAAI,CAAR,EAAW,CAAX,IAAgB,GAAvC,CAA7B;AACAgD,UAAOxD,KAAP,CAAaQ,IAAb,EAAgBuD,QAAhB,CAAyB5E,CAAzB,GAA6B+C,cAA7B;AACAsB,UAAOxD,KAAP,CAAaQ,IAAb,EAAgBuD,QAAhB,CAAyBvE,CAAzB,GAA6B,OAAOwC,IAAIxB,OAAI,CAAR,EAAW,CAAX,IAAgBwB,IAAIxB,OAAI,CAAR,EAAW,CAAX,IAAgB,GAAvC,CAA7B;;AAEAkC,SAAMoB,GAAN,CAAUN,OAAOzD,IAAP,CAAYS,IAAZ,CAAV;AACAkC,SAAMoB,GAAN,CAAUN,OAAOxD,KAAP,CAAaQ,IAAb,CAAV;AACA;;AAED;;AAEAoC,SAAO,IAAIrH,MAAM+I,UAAV,CAAqB,IAArB,EAA2B,EAA3B,CAAP;AACA1B,OAAK2B,QAAL,CAAcC,WAAd,GAA4B,IAA5B;AACA5B,OAAK6B,SAAL,CAAe,QAAf,EAAyB,QAAzB;AACA;AACA/B,QAAMoB,GAAN,CAAUlB,IAAV;;AAEA;AACA;;AAEAD,aAAW,IAAIpH,MAAMmJ,aAAV,CAAwB;AAClCC,cAAW,IADuB;AAElC3F,UAAO;AAF2B,GAAxB,CAAX;AAIA2D,WAASiC,aAAT,CAAuB,QAAvB,EAAiC,CAAjC,EAzFe,CAyFsB;AACrCjC,WAASkC,OAAT,CAAiBtC,YAAjB,EAA+BC,aAA/B;AACAG,WAASmC,UAAT,CAAoBC,KAApB,CAA0BhB,QAA1B,GAAqC,UAArC;AACAtB,YAAUuC,WAAV,CAAsBrC,SAASmC,UAA/B;;AAEAnC,WAASsC,SAAT,GAAqB,KAArB;;AAEAjI,SAAO0D,gBAAP,CAAwB,QAAxB,EAAkCwE,cAAlC,EAAkD,KAAlD;AACA;;AAED,UAASA,cAAT,CAAwBC,KAAxB,EAA+B;;AAE9B5C,iBAAe/G,EAAE,SAAF,EAAakC,KAAb,EAAf;AACA8E,kBAAgBhH,EAAE,SAAF,EAAaoC,MAAb,EAAhB;;AAEA+E,WAASkC,OAAT,CAAiBtC,YAAjB,EAA+BC,aAA/B;;AAEA1D,SAAOsG,MAAP,GAAgB7C,eAAeC,aAA/B;AACA1D,SAAOuG,sBAAP;;AAEAvC,oBAAkBsC,MAAlB,GAA2B7C,eAAeC,aAA1C;AACAM,oBAAkBuC,sBAAlB;AACA;;AAGD;AACA,UAASC,wBAAT,GAAoC;AACnCjD,wBAAsBD,OAAtB;AACAE;AACA;AACA;;AAGD,UAASA,MAAT,GAAkB;AACjBQ,oBAAkBuC,sBAAlB;AACAtC,0BAAwBwC,MAAxB;AACAxC,0BAAwByC,OAAxB,GAAkC,IAAlC;AACAvC,oBAAkBuC,OAAlB,GAA4B,KAA5B;;AAEA;AACA,MAAIxE,UAAUjE,MAAMuE,UAAN,EAAd;;AAEA,OAAK,IAAId,IAAI,CAAb,EAAgBA,IAAI,CAApB,EAAuBA,GAAvB,EAA4B;AAC3B,OAAIQ,QAAQjB,IAAR,CAAaS,CAAb,KAAmB,CAAvB,EAA0B;AACzBgD,WAAOzD,IAAP,CAAYS,CAAZ,EAAegF,OAAf,GAAyB,KAAzB;AACA,IAFD,MAGK;AACJhC,WAAOzD,IAAP,CAAYS,CAAZ,EAAegF,OAAf,GAAyB,IAAzB;AACAhC,WAAOzD,IAAP,CAAYS,CAAZ,EAAeiF,KAAf,CAAqBrB,GAArB,CAAyBpD,QAAQjB,IAAR,CAAaS,CAAb,CAAzB,EAA0CQ,QAAQjB,IAAR,CAAaS,CAAb,CAA1C,EAA2DQ,QAAQjB,IAAR,CAAaS,CAAb,CAA3D;AACA;;AAED,OAAIQ,QAAQhB,KAAR,CAAcQ,CAAd,KAAoB,CAAxB,EAA2B;AAC1BgD,WAAOxD,KAAP,CAAaQ,CAAb,EAAgBgF,OAAhB,GAA0B,KAA1B;AACA,IAFD,MAGK;AACJhC,WAAOxD,KAAP,CAAaQ,CAAb,EAAgBgF,OAAhB,GAA0B,IAA1B;AACAhC,WAAOxD,KAAP,CAAaQ,CAAb,EAAgBiF,KAAhB,CAAsBrB,GAAtB,CAA0BpD,QAAQhB,KAAR,CAAcQ,CAAd,CAA1B,EAA4CQ,QAAQhB,KAAR,CAAcQ,CAAd,CAA5C,EAA8DQ,QAAQhB,KAAR,CAAcQ,CAAd,CAA9D;AACA;AACD;AACA;AACD;;AAEAqC,YAAUqB,QAAV,CAAmBE,GAAnB,CAAuB,CAAvB,EAA0B,CAA1B,EAA6B,CAA7B;AACAvB,YAAU6C,YAAV,CAAwB,IAAInK,MAAMsD,OAAV,CAAkB,CAAlB,EAAqB,CAArB,EAAwB,CAAxB,CAAD,CAA6B8G,SAA7B,EAAvB,EAAiE1D,oBAAoB,CAApB,IAAyBhD,KAAKG,EAA9B,GAAmC,GAApG;AACAyD,YAAU6C,YAAV,CAAwB,IAAInK,MAAMsD,OAAV,CAAkB,CAAlB,EAAqB,CAArB,EAAwB,CAAxB,CAAD,CAA6B8G,SAA7B,EAAvB,EAAiE1D,oBAAoB,CAApB,IAAyBhD,KAAKG,EAA9B,GAAmC,GAApG;;AAEAuD,WAASiD,KAAT;;AAEAhD,OAAK2B,QAAL,CAAcsB,OAAd,GAAwB,GAAxB;;AAEAlD,WAASmD,WAAT,CAAqB,CAArB,EAAwB,CAAxB,EAA2BvD,YAA3B,EAAyCC,aAAzC;AACAG,WAASL,MAAT,CAAgBI,KAAhB,EAAuB5D,MAAvB;AACA;AAED,C;;;;;;;AC9mBD;;AAEA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;;AAEA;AACA;AACA,4CAA4C;;AAE5C;;;;;;;;;ACpBA;;AAEA,mBAAAxD,CAAQ,GAAR;;AAEA,IAAMG,yBAAyB,mBAAAH,CAAQ,EAAR,EAAwBG,sBAAvD;;AAEA,IAAMsK,cAAc,IAAI,CAAxB;;AAEA;;;;;;;;;;;;;;;;AAgBA,IAAIC,eAAe,EAAnB;;AAEA,SAASC,SAAT,CAAmBC,KAAnB,EAA0B;AACzB,KAAIC,MAAM,EAAV;AACAA,KAAIvF,MAAJ,GAAasF,KAAb;;AAEAC,KAAIC,OAAJ,CAAY,UAAC5F,CAAD,EAAI6F,EAAJ,EAAQF,GAAR;AAAA,SAAgBA,IAAI3F,CAAJ,IAAS,CAAzB;AAAA,EAAZ;;AAEA,QAAO2F,GAAP;AACA;;AAED,SAAS5I,KAAT,CAAeuC,UAAf,EAA2B;AAC1B,KAAMwG,WAAW,IAAIC,YAAJ,EAAjB;AACA,KAAInJ,OAAO,IAAX;;AAEA,KAAIoJ,MAAMP,UAAUF,WAAV,CAAV;AACA,KAAIU,WAAWR,UAAUF,WAAV,CAAf;AACA,KAAI/E,UAAUiF,UAAUF,WAAV,CAAd;AACA,KAAIW,aAAaT,UAAUF,WAAV,CAAjB;AACA,KAAIY,SAASV,UAAUnG,WAAWc,MAArB,CAAb;AACA,KAAIP,eAAe,KAAnB;AACA,KAAIuG,oBAAoB,CAAxB;;AAEA,KAAIxG,SAAS,KAAb;AACA,KAAIyG,WAAW,KAAf;AACA,KAAIC,YAAY,CAAhB;AACA,KAAIC,WAAW,CAAf;;AAGA,UAASC,OAAT,CAAiBC,IAAjB,EAAuBzG,CAAvB,EAA0B;AACzB3D,UAAQhB,IAAR,CAAa,cAAcoL,IAA3B;;AAEAC,QAAMD,IAAN,EAAY;AACXE,WAAQ,KADG;AAEXC,iBAAc,aAFH;AAGXC,UAAO;AAHI,GAAZ,EAIGC,IAJH,CAIQ,UAACC,GAAD,EAAS;AAChB,UAAOA,IAAIC,WAAJ,EAAP;AACA,GAND,EAMGF,IANH,CAMQ,UAACG,IAAD,EAAU;AACjB,OAAIzB,aAAaiB,IAAb,CAAJ,EACA;AACC,WAAOS,QAAQC,OAAR,CAAgB3B,aAAaiB,IAAb,CAAhB,CAAP;AACA,IAHD,MAKA;AACC,WAAOX,SAASsB,eAAT,CAAyBH,IAAzB,CAAP;AACA;AACD,GAfD,EAeGH,IAfH,CAeQ,UAACO,OAAD,EAAa;AACpBlB,UAAO1H,KAAK6I,KAAL,CAAWtH,IAAI,CAAf,CAAP,IAA4BqH,OAA5B;;AAEA,OAAI,CAAC7B,aAAaiB,IAAb,CAAL,EACA;AACCjB,iBAAaiB,IAAb,IAAqBY,OAArB;AACA;;AAED,UAAOrH,CAAP;AACA,GAxBD,EAwBG8G,IAxBH,CAwBQ,UAAC9G,CAAD,EAAO;AACd3D,WAAQC,GAAR,CAAY,kBAAkBmK,IAAlB,GAAyB,OAAzB,GAAmCzG,CAAnC,GAAuC,IAAvC,IAA+CA,IAAI,CAAnD,IAAwD,UAApE;;AAEA3D,WAAQkL,OAAR,CAAgB,cAAcd,IAA9B;AACAL,wBAAqB,CAArB;AACAvG,kBAAgB0F,eAAea,iBAA/B;AACA,GA9BD,EA8BGoB,KA9BH,CA8BS,UAACC,GAAD,EAAS;AACjBpL,WAAQwE,IAAR,CAAa4G,GAAb;AACA,GAhCD;AAiCA;;AAGD,UAASC,WAAT,CAAqBrM,IAArB,EAA2B;AAC1B,MAAIuB,KAAKuC,OAAL,MAAkB,CAACS,MAAvB,EACA;AACC,QAAK,IAAII,IAAI,CAAR,EAAW2H,IAAI,CAApB,EAAuBA,IAAIxB,OAAO/F,MAAlC,EAA0C,EAAEuH,CAAF,EAAK3H,KAAK,CAApD,EACA;AACC;AACAgG,QAAIhG,CAAJ,IAAS8F,SAAS8B,kBAAT,EAAT;AACA5B,QAAIhG,CAAJ,EAAOmG,MAAP,GAAgBA,OAAOwB,CAAP,CAAhB;;AAEA1B,aAASjG,CAAT,IAAc8F,SAAS+B,UAAT,EAAd;AACA5B,aAASjG,CAAT,EAAY8H,IAAZ,CAAiBC,KAAjB,GAAyB,CAAzB;;AAEA7B,eAAWlG,CAAX,IAAgB8F,SAASkC,YAAT,EAAhB;AACA9B,eAAWlG,CAAX,EAAciI,WAAd,CAA0B,CAAC,CAA3B,EAA8B,CAA9B,EAAiC,CAAjC;AACA/B,eAAWlG,CAAX,EAAckI,YAAd,GAA6B,YAA7B;;AAGAlC,QAAIhG,CAAJ,EAAOmI,OAAP,CAAejC,WAAWlG,CAAX,CAAf;AACAkG,eAAWlG,CAAX,EAAcmI,OAAd,CAAsBlC,SAASjG,CAAT,CAAtB;AACAiG,aAASjG,CAAT,EAAYmI,OAAZ,CAAoBrC,SAASsC,WAA7B;;AAEA;AACApC,QAAIhG,IAAI,CAAR,IAAa8F,SAAS8B,kBAAT,EAAb;AACA5B,QAAIhG,IAAI,CAAR,EAAWmG,MAAX,GAAoBA,OAAOwB,CAAP,CAApB;;AAEA1B,aAASjG,IAAI,CAAb,IAAkB8F,SAAS+B,UAAT,EAAlB;AACA5B,aAASjG,IAAI,CAAb,EAAgB8H,IAAhB,CAAqBC,KAArB,GAA6B,CAA7B;;AAEA7B,eAAWlG,IAAI,CAAf,IAAoB8F,SAASkC,YAAT,EAApB;AACA9B,eAAWlG,IAAI,CAAf,EAAkBiI,WAAlB,CAA8B,CAA9B,EAAiC,CAAjC,EAAoC,CAApC,EAzBD,CAyByC;AACxC/B,eAAWlG,IAAI,CAAf,EAAkBkI,YAAlB,GAAiC,YAAjC;;AAEAlC,QAAIhG,IAAI,CAAR,EAAWmI,OAAX,CAAmBjC,WAAWlG,IAAI,CAAf,CAAnB;AACAkG,eAAWlG,IAAI,CAAf,EAAkBmI,OAAlB,CAA0BlC,SAASjG,IAAI,CAAb,CAA1B;AACAiG,aAASjG,IAAI,CAAb,EAAgBmI,OAAhB,CAAwBrC,SAASsC,WAAjC;AACA;;AAEQ,QAAK,IAAIpI,KAAI,CAAb,EAAgBA,KAAIuF,WAApB,EAAiC,EAAEvF,EAAnC,EACA;AACIgG,QAAIhG,EAAJ,EAAOqI,KAAP,CAAa,CAAb,EAAgBhN,IAAhB;AACH;;AAEDiL,eAAYR,SAAS9H,WAAT,GAAuB3C,IAAnC;AACTuE,YAAS,IAAT;AACM;AACJ;;AAGJ,MAAKT,OAAL,GAAe,YAAY;AAC1B,SAAOU,gBAAgB,CAACwG,QAAxB;AACA,EAFD;;AAIA,MAAKpI,IAAL,GAAY,YAAqC;AAAA,MAA3B5C,IAA2B,uEAApBuB,KAAKoB,WAAL,EAAoB;;AAChD,MAAI,KAAKmB,OAAL,MAAkB,CAACS,MAAnB,IAA6B,CAACyG,QAAlC,EACA;AACCqB,eAAYrM,IAAZ;;AAEA0F;AACA;AACD,EAPD;;AASA,MAAKjD,KAAL,GAAa,YAAY;AACxB,OAAKtC,IAAL;AACA,EAFD;;AAIA,MAAKA,IAAL,GAAY,YAAY;AACjB,MAAI,KAAK2D,OAAL,MAAkBS,MAAlB,IAA4B,CAACyG,QAAjC,EACA;AACIzG,YAAS,KAAT;;AAEA2G,cAAWT,SAAS9H,WAApB;;AAEA,QAAK,IAAIgC,IAAI,CAAb,EAAgBA,IAAIgG,IAAI5F,MAAxB,EAAgC,EAAEJ,CAAlC,EACA;AACIgG,QAAIhG,CAAJ,EAAOxE,IAAP;;AAEA,QAAI,OAAOwK,IAAIhG,CAAJ,EAAOsI,UAAd,IAA4B,UAAhC,EACCtC,IAAIhG,CAAJ,EAAOsI,UAAP;AACJ;AACJ;AACP,EAfD;;AAiBA,MAAKC,MAAL,GAAc,YAAY;AACzB,MAAI,KAAKpJ,OAAL,EAAJ,EACA;AACU,QAAK,IAAIa,IAAI,CAAb,EAAgBA,IAAIgG,IAAI5F,MAAxB,EAAgC,EAAEJ,CAAlC,EACA;AACIgG,QAAIhG,CAAJ,EAAOxE,IAAP;AACH;AACJ;;AAEP6K,aAAW,IAAX;AACA,EAVD;;AAYA,MAAKrI,WAAL,GAAmB,YAAY;AAC9B,MAAI,CAAC,KAAKmB,OAAL,EAAD,IAAmB,CAACS,MAAxB,EACA;AACC,UAAO2G,WAAWD,SAAX,GAAuB,CAAvB,GAA2BC,WAAWD,SAAtC,GAAkD,CAAzD;AACA,GAHD,MAKA;AACC,UAAOR,SAAS9H,WAAT,GAAuBsI,SAA9B;AACA;AACD,EATD;;AAWA,MAAKvI,MAAL,GAAc,UAAU1C,IAAV,EAAgB;AAC7B,MAAIA,OAAO,CAAX,EACA;AACCA,UAAO,CAAP;AACA;;AAED,OAAKG,IAAL;AACA,OAAKyC,IAAL,CAAU5C,IAAV;;AAEAgB,UAAQC,GAAR,CAAY,QAAZ;AACA,EAVD;;AAYA,MAAKwE,UAAL,GAAkB,YAAY;AAC7B,SAAON,OAAP;AACA,EAFD;;AAIA,UAASO,UAAT,GAAsB;AACrB,MAAInE,KAAKuC,OAAL,MAAkBS,MAAtB,EACA;AACC,QAAK,IAAII,IAAI,CAAb,EAAgBA,IAAIgG,IAAI5F,MAAxB,EAAgC,EAAEJ,CAAlC,EACA;AACCiG,aAASjG,CAAT,EAAY8H,IAAZ,CAAiBC,KAAjB,GAAyBvH,QAAQR,CAAR,CAAzB;AACA;AACD;AAED;;AAED,MAAK9B,aAAL,GAAqB,UAASgD,GAAT,EAAcC,KAAd,EAA+B;AAAA,MAAVC,IAAU,uEAAH,CAAG;;AACnD,MAAIC,OAAOpG,uBAAuBiG,GAAvB,EAA4BC,KAA5B,EAAmCC,IAAnC,CAAX;;AAEA,OAAK,IAAIpB,IAAI,CAAb,EAAgBA,IAAIuF,WAApB,EAAiC,EAAEvF,CAAnC,EAAsC;AACrCQ,WAAQR,CAAR,IAAaqB,KAAKrB,CAAL,CAAb;AACA;;AAED,MAAIJ,MAAJ,EACA;AACUmB;AACT;AACD,EAXD;;AAaA,MAAK,IAAIf,IAAI,CAAb,EAAgBA,IAAIV,WAAWc,MAA/B,EAAuC,EAAEJ,CAAzC,EACA;AACCwG,UAAQlH,WAAWU,CAAX,CAAR,EAAuBA,IAAI,CAA3B;AACA;;AAED,QAAO,IAAP;AACA;;AAED;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsPAwI,OAAOC,OAAP,GAAiB1L,KAAjB,C;;;;;;;;;;;;AC3eA;;;;;;;;;;;;;ACAA;;AACA;AACA,oCACA;6BACA;wCACA;+BACA;AACA;8CACA;qDACA;mCACA;AACA;qCACA;4BACA;AACA;yBACA;AACA;AACA;oCACA;qCACA;wBACA;mCACA;AACA;AACA;;AACA,uFACA;gCACA;uFACA;sBACA;AACA;AACA;+BACA;AACA;yDAEA;;AACA;AACA;AACA;mBACA;AACA;;AACA,8EACA;2BACA;oCACA;AACA;gCACA;6CACA;AAEA;;2BACA;2BACA;AAEA;;yEACA;AACA;;AAKA;;;;;AACA,6EACA;qDACA;YACA;;AACA,qDACA;;AACA;AACA;AACA;AACA,6BACA;;AAIA;;;;AACA,0CACA;4BACA;kDACA;sCACA;mBACA;AACA;;AACA;AACA,yBACA;;AACA,sCACA;AACA;4DACA;gCACA;wCACA;AACA;gCACA;kEACA;AACA;;AACA,uCACA;6DACA;AACA;;AACA,kCACA;AACA;yBACA;0EACA;sCACA;kHACA;oEACA;oDACA;AACA;AACA;oDACA;AAEA;;AAEA;;oCACA;mCACA;AACA;AACA;;AAIA;;;;AACA,wBACA;AACA;wBACA;+BAEA;;AACA;kDACA;sBACA;AACA;AAEA;;+BACA;AACA;AACA;4BAEA;;wCACA;sBACA;AAEA;;0BACA;2BAEA;;0CAEA;;AACA;0CACA;;AACA,oCACA;AACA;wBACA;+BAEA;;0BACA;2BAEA;;AACA;AACA;AACA;kDACA;sBACA;AAEA;;+CACA;AACA;AAEA;;4BACA;0CACA;6BACA;gCACA;8CACA;AACA;AACA;;AAIA;;;;AACA;oCAEA;iCADA,CAEA;8BACA;2BACA;4DAEA;;0BACA;kDACA;mBACA;;2BAEA;4BACA;4CACA;+CACA;AACA;0CACA;+CACA;AACA;mDACA;2CACA;AACA;AACA;gCACA;6CACA;AAEA;AAhBA;AAkBA;;AACA;AACA;AACA;0DACA;iFACA;AACA;mCACA;0BACA;8CACA;AACA;eAEA;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","file":"_main.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 202);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 178faae637f1d12e4f1b","/* global Uint32Array, Promise */\n\n\"use strict\";\n\nvar BaseAudioContext = require(\"base-audio-context\");\nvar OfflineAudioContext = global.OfflineAudioContext || global.webkitOfflineAudioContext;\n\nif (OfflineAudioContext) {\n  var silent = new Uint32Array([\n    0x46464952, 0x00000038, 0x45564157, 0x20746d66,\n    0x00000010, 0x00010001, 0x0000ac44, 0x00015888,\n    0x00100002, 0x61746164, 0x00000014, 0x00000000,\n    0x00000000, 0x00000000, 0x00000000, 0x00000000,\n  ]).buffer;\n\n  var isPromiseBased = (function() {\n    var context = new OfflineAudioContext(1, 128, 44100);\n\n    return context.decodeAudioData(silent, function() {}, function() {});\n  })();\n\n  if (!isPromiseBased) {\n    var decodeAudioData = BaseAudioContext.prototype.decodeAudioData;\n\n    BaseAudioContext.prototype.decodeAudioData = function(audioData, successCallback, errorCallback) {\n      var _this = this;\n      var promise = new Promise(function(resolve, reject) {\n        return decodeAudioData.call(_this, audioData, resolve, reject);\n      });\n\n      promise.then(successCallback, errorCallback);\n\n      return promise;\n    };\n\n    BaseAudioContext.prototype.decodeAudioData.original = decodeAudioData;\n  }\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../~/promise-decode-audio-data/index.js\n// module id = 102\n// module chunks = 0 2","\"use strict\";\r\n\r\n/**\r\n * (m)Point\r\n * one uppercase letter is mPoint\r\n * @param x_ coordinate\r\n * @param y_ coordinate\r\n * @param z_ coordinate\r\n */\r\n\r\nfunction Point(x_ = 0, y_ = 0, z_ = 0)\r\n{\r\n\tthis.x = x_;\r\n\tthis.y = y_;\r\n\tthis.z = z_;\r\n}\r\n\r\n/**\r\n * depth copy\r\n * @param A copy this = A; if A is undefined return copy of this\r\n * @return {Point}\r\n */\r\nPoint.prototype.copy = function(A) {\r\n\tif (arguments.length == 1)\r\n\t{\r\n\t\tthis.x = A.x; this.y = A.y; this.z = A.z;\r\n\r\n\t\treturn this;\r\n\t}\r\n\telse\r\n\t{\r\n\t\treturn new Point(this.x, this.y, this.z);\r\n\t}\r\n};\r\n\r\n/**  const\r\n * sqrt(A * A)\r\n * @return {number}\r\n */\r\nPoint.prototype.length = function () {\r\n\treturn Math.sqrt(Point.dot(this, this));\r\n};\r\n\r\n/**  const\r\n * A[i]\r\n * @param i = [0..2]\r\n * @return {number} i coordinate\r\n */\r\nPoint.prototype.at = function(i) {\r\n\tswitch (i) {\r\n\t\tcase 0:\r\n\t\t\ti = 'x';\r\n\t\t\tbreak;\r\n\t\tcase 1:\r\n\t\t\ti = 'y';\r\n\t\t\tbreak;\r\n\t\tcase 2:\r\n\t\t\ti = 'z';\r\n\t\t\tbreak;\r\n\t\tdefault:\r\n\t\t\t// Wrong arg\r\n\t\t\ti = 'x';\r\n\t}\r\n\r\n\treturn this[i];\r\n};\r\n\r\n/**\r\n * A / length\r\n * @return {Point}        old\r\n */\r\nPoint.prototype.normalize = function() {\r\n\tlet length = this.length();\r\n\r\n\tif(length > 0)\r\n\t{\r\n\t\tthis.x /= length;\r\n\t\tthis.y /= length;\r\n\t\tthis.z /= length;\r\n\t}\r\n\r\n\treturn this;\r\n};\r\n\r\nPoint.prototype.getNormalize = function() {\r\n\tlet length = this.length();\r\n\tif (length > 0)\r\n\t{\r\n\t\treturn new Point(this.x / length, this.y / length, this.z / length);\r\n\t}\r\n\telse\r\n\t{\r\n\t\treturn new Point();\r\n\t}\r\n};\r\n\r\n/**    const\r\n * rotate this on angle_ grad regarding axis Axis_\r\n * @param angle_ in grad\r\n * @param Axis_ Point <=> axis of rotate\r\n * @return {Point}        new\r\n */\r\nPoint.prototype.getRotated = function(angle_, Axis_) {\r\n\tlet Axis = Axis_.getNormalize();\r\n\tlet angle = angle_ * Point.DEG_TO_RAD;\r\n\r\n\tlet sinA = Math.sin( angle );\r\n\tlet cosA = Math.cos( angle );\r\n\tlet cosB = 1 - cosA;\r\n\r\n\tlet nx = this.x * (Axis.x * Axis.x * cosB + cosA)\r\n\t\t+ this.y * (Axis.x * Axis.y*cosB - Axis.z * sinA)\r\n\t\t+ this.z * (Axis.x * Axis.z * cosB + Axis.y * sinA);\r\n\tlet ny = this.x * (Axis.y * Axis.x * cosB + Axis.z * sinA)\r\n\t\t+ this.y * (Axis.y * Axis.y * cosB + cosA)\r\n\t\t+ this.z * (Axis.y * Axis.z * cosB - Axis.x * sinA);\r\n\tlet nz = this.x * (Axis.z * Axis.x * cosB - Axis.y * sinA)\r\n\t\t+ this.y * (Axis.z * Axis.y * cosB + Axis.x * sinA)\r\n\t\t+ this.z * (Axis.z * Axis.z * cosB + cosA);\r\n\r\n\treturn new Point(nx, ny, nz);\r\n};\r\n\r\n/**\r\n * rotate this on angle_ deg regarding axis Axis_\r\n * @param angle_ in deg\r\n * @param Axis_ Point <=> axis of rotate\r\n * @return {Point}        old\r\n */\r\nPoint.prototype.rotate = function(angle_, Axis_) {\r\n\treturn this.copy(this.getRotated(angle_,  Axis_));\r\n};\r\n\r\nPoint.DEG_TO_RAD = Math.PI / 180;\r\n\r\n/**\r\n * transform deg to rad\r\n * @param angle in deg\r\n * @return {number} in rad\r\n */\r\nPoint.degToRad = function (angle) {\r\n\treturn angle * Point.DEG_TO_RAD;\r\n};\r\n\r\n/**\r\n * (a.x + b.x, ...)\r\n * A + B = B + A\r\n * @param A first Point   const\r\n * @param B second Point  const\r\n * @return {Point}          new\r\n */\r\nPoint.plus = function(A, B) {\r\n\treturn new Point(A.x + B.x, A.y + B.y, A.z + B.z);\r\n};\r\n\r\n/**\r\n * (a.x * f, ...)\r\n * @param A Point         const\r\n * @param f scalar\r\n * @return {Point}        new\r\n */\r\nPoint.scalarMult = function(A, f) {\r\n\treturn new Point(A.x * f, A.y * f, A.z * f);\r\n};\r\n\r\n/**\r\n * (a.x * b.x + ...)\r\n * A * B = B * A\r\n * @param A Point         const\r\n * @param B Point         const\r\n * @return {number}\r\n */\r\nPoint.dot = function(A, B) {\r\n\treturn (A.x * B.x + A.y * B.y + A.z * B.z);\r\n};\r\n\r\n/**\r\n * (a.x - b.x, ...)\r\n * @param A Point         const\r\n * @param B Point         const\r\n * @return {Point}        new\r\n */\r\nPoint.minus = function(A, B) {\r\n\treturn Point.plus(A, Point.scalarMult(B, -1));\r\n};\r\n\r\n\r\n\r\nmodule.exports = Point;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./mPoint\n// module id = 187\n// module chunks = 0 2","'use strict';\r\n\r\nlet videojs = require('videojs');\r\nrequire('./videojs/videojs-panorama.v5');\r\nlet THREE = require('THREE');\r\nlet $ = require('jQuery');\r\n\r\nconst eightChannelsAlgorithm = require('./sound').eightChannelsAlgorithm;\r\n\r\nconst FRAMES_PER_SECOND = 60;\r\n\r\nfunction delay(cb, time)\r\n{\r\n\tlet timerId = setTimeout(cb, time);\r\n\r\n\tfunction stop() {\r\n\t\tclearTimeout(timerId);\r\n\t}\r\n\r\n\tfunction now() {\r\n\t\tcb();\r\n\r\n\t\tstop();\r\n\t}\r\n\r\n\treturn {\r\n\t\tstop: stop,\r\n\t\tnow: now\r\n\t};\r\n}\r\n\r\nconst audioFiles4 = [{\r\n\tsrc: \"./audio/000.mp3\",\r\n\tname: \"front\"\r\n}, {\r\n\tsrc: \"./audio/270.mp3\",\r\n\tname: \"right\"\r\n}, {\r\n\tsrc: \"./audio/180.mp3\",\r\n\tname: \"back\"\r\n}, {\r\n\tsrc: \"./audio/090.mp3\",\r\n\tname: \"left\"\r\n}];\r\n\r\nconst audioFiles8 = (function () {\r\n\tlet audio = {};\r\n\r\n\tfor (let side of ['left', 'right'])\r\n\t{\r\n\t\taudio[side] = [];\r\n\r\n\t\tfor (let posH of ['l', 'h'])\r\n\t\t{\r\n\t\t\tfor (let posFB of ['f', 'b'])\r\n\t\t\t{\r\n\t\t\t\tfor (let posLR of (posFB == 'f' ? ['l', 'r'] : ['r', 'l']))\r\n\t\t\t\t{\r\n\t\t\t\t\taudio[side].push({\r\n\t\t\t\t\t\tsrc: \"./audio/000.mp3\", /* ./audio/side_posLRposFBposH.mp3 */\r\n\t\t\t\t\t\tname: side + '_' + posLR + posFB + posH\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tconsole.log(audio);\r\n\r\n\treturn audio;\r\n})();\r\n\r\n\r\nlet sound;\r\n\r\n// DEBUG\r\nwindow.sound = sound;\r\n// END DEBUG\r\n\r\n\r\n$(document).ready(function () {\r\n\tlet player = window.player = videojs('videojs-panorama-player', {}, function() {\r\n\t\tlet thus = this;\r\n\r\n\t\tlet isPlayBeforeSeeking = false;\r\n\t\tlet isVideoReady = false;\r\n\r\n\t\tsound = new Sound(audioFiles8, player);\r\n\r\n\t\tlet videoElement = document.getElementById(\"videojs-panorama-player\");\r\n\t\tlet width = videoElement.offsetWidth;\r\n\t\tlet height = videoElement.offsetHeight;\r\n\r\n\t\tthis.width(width);\r\n\t\tthis.height(height);\r\n\r\n\t\tthis.volume(0);\r\n\r\n\t\tthis.panorama({\r\n\t\t\tclickAndDrag: true,\r\n\t\t\tshowNotice: false,\r\n\t\t\tbackToVerticalCenter: false,\r\n\t\t\tbackToHorizonCenter: false,\r\n\t\t\t// clickToToggle: true,\r\n\t\t\tcallback: function() {\r\n\t\t\t\tisVideoReady = true;\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tthis.on('pause', function () {\r\n\t\t\tsound.pause();\r\n\t\t});\r\n\r\n\r\n\t\tthis.on('seeked', function() {\r\n\t\t\tdelay(function() {\r\n\t\t\t\tsound.rewind(thus.currentTime());\r\n\t\t\t}, 100);\r\n\t\t});\r\n\r\n\t\tthis.on('play', function() {\r\n\t\t\tsound.play();\r\n\t\t});\r\n\r\n\t\tfunction updateVolumes() {\r\n\t\t\tif (thus.getChild('Canvas'))\r\n\t\t\t{\r\n\t\t\t\tlet vector = new THREE.Vector3();\r\n\r\n\t\t\t\tthus.getChild('Canvas').camera.getWorldDirection(vector);\r\n\t\t\t\tlet alpha = Math.asin(vector.y) * 180 / Math.PI;\r\n\t\t\t\tlet theta = Math.atan2(vector.x, vector.z) * 180 / Math.PI + 90;\r\n\r\n\t\t\t\tif (theta < 0)\r\n\t\t\t\t\ttheta = 360 + theta;\r\n\r\n\t\t\t\tsound.updateVolumes(-theta, -alpha);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tsetTimeout(function __timeoutUpdateVolumes(){\r\n\t\t\tupdateVolumes();\r\n\r\n\t\t\tsetTimeout(__timeoutUpdateVolumes, 1000 / FRAMES_PER_SECOND);\r\n\t\t}, 1000 / FRAMES_PER_SECOND);\r\n\r\n\r\n\t\tfunction Play() {\r\n\t\t\tif (isVideoReady == true && sound.isReady() == true) {\r\n\t\t\t\tsound.play();\r\n\t\t\t\tplayer.play();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tsetTimeout(function __playTimeout() {\r\n\t\t\tif (isVideoReady == true && sound.isReady() == true)\r\n\t\t\t{\r\n\t\t\t\tPlay();\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\tsetTimeout(__playTimeout, 100);\r\n\t\t\t}\r\n\t\t}, 100);\r\n\r\n\t\t__cb(thus, sound);\r\n\t});\r\n\r\n});\r\n\r\n\r\nfunction Sound(audioFiles, player) {\r\n\tlet audio = {\r\n\t\tleft: [8],\r\n\t\tright: [8]\r\n\t};\r\n\t\r\n\tlet _volumes = {\r\n\t\tleft: [8],\r\n\t\tright: [8]\r\n\t};\r\n\tlet loaded = false;\r\n\tlet loadedCount = 0;\r\n\r\n\tlet isPlay = false;\r\n\tlet isSoundReady = false;\r\n\r\n\tlet maxPhaseError = 0;\r\n\r\n\tfunction preloadAudio(i, side) {\r\n\t\taudio[side][i] = new Audio();\r\n\t\taudio[side][i].addEventListener('canplaythrough', loadedAudio, false);\r\n\t\taudio[side][i].src = audioFiles[side][i].src;\r\n\t}\r\n\r\n\tfunction loadedAudio() {\r\n\t\tif (!loaded) {\r\n\t\t\tloadedCount++;\r\n\t\t\tloaded = (loadedCount == audioFiles.left.length + audioFiles.right.length);\r\n\r\n\t\t\tisSoundReady = loaded;\r\n\t\t\tdocument.getElementById(\"status\").innerHTML = \"loaded: \" + (100 * loadedCount / (audioFiles.left.length + audioFiles.right.length));\r\n\t\t}\r\n\t}\r\n\r\n\tfunction Sound3D_OldVersion(angle) {\r\n\t\tlet volumes = [0.0, 0.0, 0.0, 0.0];\r\n\r\n\t\tvolumes[0] = 1.0 - Math.min(1.0, Math.min(360 - angle, angle) / 90.0);\r\n\t\tvolumes[1] = 1.0 - Math.min(1.0, Math.abs(90 - angle, angle) / 90.0);\r\n\t\tvolumes[2] = 1.0 - Math.min(1.0, Math.abs(180 - angle, angle) / 90.0);\r\n\t\tvolumes[3] = 1.0 - Math.min(1.0, Math.abs(270 - angle, angle) / 90.0);\r\n\r\n\t\treturn volumes;\r\n\t}\r\n\r\n\tfunction setVolumeOnSide(volumes, side) {\r\n\t\tfor (let i in volumes[side])\r\n\t\t{\r\n\t\t\tif (volumes[side].hasOwnProperty(i))\r\n\t\t\t{\r\n\t\t\t\tif (volumes[side][i] < 0 || volumes[side][i] > 1)\r\n\t\t\t\t{\r\n\t\t\t\t\tconsole.warn('Volumes error(out of range):' + volumes);\r\n\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfor (let i in audio[side])\r\n\t\t{\r\n\t\t\taudio[side][i].volume = volumes[side][i];\r\n\t\t}\r\n\t}\r\n\r\n\tfunction getVolumes() {\r\n\t\treturn _volumes;\r\n\t}\r\n\r\n\tfunction setVolumes(volumes = _volumes)\r\n\t{\r\n\t\tsetVolumeOnSide(volumes, 'left');\r\n\t\tsetVolumeOnSide(volumes, 'right');\r\n\r\n\t\t_volumes = volumes;\r\n\r\n\t\treturn getVolumes();\r\n\t}\r\n\r\n\tfunction rewind(time) {\r\n\t\tif (time < 0)\r\n\t\t{\r\n\t\t\tstop();\r\n\r\n\t\t\treturn ;\r\n\t\t}\r\n\r\n\t\tfor (let side of ['left', 'right'])\r\n\t\t{\r\n\t\t\tfor (let i in audio[side])\r\n\t\t\t{\r\n\t\t\t\tif (audio[side][i].duration < time) {\r\n\t\t\t\t\tconsole.warn('Rewind(out of range):' + time + ' > ' + audioFiles[side][i].name + '.duration = ' + audio[side][i].duration);\r\n\t\t\t\t\tstop();\r\n\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\taudio[side][i].currentTime = time;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tfunction getAudio() {\r\n\t\treturn audio;\r\n\t}\r\n\r\n\tfunction play() {\r\n\t\tif (!isPlay)\r\n\t\t{\r\n\t\t\tfor (let side of ['left', 'right'])\r\n\t\t\t{\r\n\t\t\t\tfor (let i in audio[side])\r\n\t\t\t\t{\r\n\t\t\t\t\taudio[side][i].play();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tisPlay = true;\r\n\t\t}\r\n\t}\r\n\r\n\tfunction pause() {\r\n\t\tif (isPlay)\r\n\t\t{\r\n\t\t\tfor (let side of ['left', 'right'])\r\n\t\t\t{\r\n\t\t\t\tfor (let i in audio[side])\r\n\t\t\t\t{\r\n\t\t\t\t\taudio[side][i].pause();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tisPlay = false;\r\n\t\t}\r\n\t}\r\n\r\n\tfunction stop() {\r\n\t\trewind(0);\r\n\t\tpause();\r\n\t}\r\n\r\n\tfunction isReady() {\r\n\t\treturn isSoundReady\r\n\t}\r\n\r\n\tfunction updateVolumes(yaw, pitch, roll = 0)\r\n\t{\r\n\t\tlet vols = eightChannelsAlgorithm(yaw, pitch, roll);\r\n\r\n\t\tfor (let i = 0; i < 8; ++i)\r\n\t\t{\r\n\t\t\t_volumes.left[i] = vols[2 * i];\r\n\t\t}\r\n\r\n\t\tfor (let i = 0; i < 8; ++i)\r\n\t\t{\r\n\t\t\t_volumes.right[i] = vols[2 * i + 1];\r\n\t\t}\r\n\r\n\t\tsetVolumes();\r\n\t}\r\n\r\n\t// auto start preloading\r\n\tfor (let i in audioFiles.left) {\r\n\t\tpreloadAudio(i, 'left');\r\n\t}\r\n\tfor (let i in audioFiles.right) {\r\n\t\tpreloadAudio(i, 'right');\r\n\t}\r\n\r\n\tsetInterval(function() {\r\n\t\tif (loaded) {\r\n\t\t\tlet min = 3600; // hour\r\n\t\t\tlet max = 0;\r\n\r\n\t\t\tdocument.getElementById(\"status\").innerHTML = \"currentTime: <br/>\";\r\n\r\n\t\t\tfor (let side of ['left', 'right'])\r\n\t\t\t{\r\n\t\t\t\tfor (let i in audio[side])\r\n\t\t\t\t{\r\n\t\t\t\t\tlet pos = audio[side][i].currentTime;\r\n\t\t\t\t\tif (pos < min) min = pos;\r\n\t\t\t\t\tif (pos > max) max = pos;\r\n\r\n\t\t\t\t\tdocument.getElementById(\"status\").innerHTML += audioFiles[side][i].name + \". \" + pos + \" , volume: \" + audio[side][i].volume + \"<br/>\";\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif ((max - min) * 1000 > maxPhaseError)\r\n\t\t\t{\r\n\t\t\t\tmaxPhaseError = (max - min) * 1000;\r\n\t\t\t}\r\n\r\n\t\t\tdocument.getElementById(\"status\").innerHTML += \"<br/>\" + \"<br/>phase error: \" + (max - min) * 1000 + \"ms<br/>\";\r\n\t\t\tdocument.getElementById(\"status\").innerHTML += \"max phase error: \" + maxPhaseError + \"ms<br/>\";\r\n\t\t\tdocument.getElementById(\"status\").innerHTML += \"<br/>player: \" + player.currentTime() + \"ms<br/>\";\r\n\t\t\tdocument.getElementById(\"status\").innerHTML += \"player/sound error: \" +\r\n\t\t\t\t(player.currentTime() - audio['left'][0].currentTime) * 1000 + \"ms<br/>\";\r\n\r\n\t\t}\r\n\t}, 100);\r\n\r\n\treturn {\r\n\t\tsetVolumes: setVolumes,\r\n\t\tgetVolumes: getVolumes,\r\n\t\tupdateVolumes: updateVolumes,\r\n\t\tSound3D_OldVersion: Sound3D_OldVersion,\r\n\t\tgetAudio: getAudio,\r\n\t\tplay: play,\r\n\t\tpause: pause,\r\n\t\trewind: rewind,\r\n\t\tstop: stop,\r\n\t\tisReady: isReady\r\n\t};\r\n}\r\n\r\n\r\nfunction __cb(player, sound) {\r\n\tlet cameraRotationAngle = [0, 0];\r\n\r\n\tconst POS_Y_H_SPHERE = 600;\r\n\tconst SPHERE_DIAMETER = 100;\r\n\r\n\tfunction animate() {\r\n\t\tsetTimeout(function () {\r\n\t\t\trequestAnimationFrame(animate);\r\n\r\n\t\t\tif (player.getChild('Canvas'))\r\n\t\t\t{\r\n\t\t\t\tlet vector = new THREE.Vector3();\r\n\r\n\t\t\t\tplayer.getChild('Canvas').camera.getWorldDirection(vector);\r\n\t\t\t\tlet alpha = Math.asin(vector.y) * 180 / Math.PI;\r\n\t\t\t\tlet theta = Math.atan2(vector.x, vector.z) * 180 / Math.PI + 90;\r\n\r\n\t\t\t\tif (theta < 0) theta = 360 + theta;\r\n\r\n\t\t\t\t// console.log(\"cameraRotationAngle:\", cameraRotationAngle);\r\n\r\n\t\t\t\tcameraRotationAngle= [theta, alpha];\r\n\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\tconsole.warn(\"player.getChild(Canvas) undefined\");\r\n\r\n\t\t\t\tcameraRotationAngle = [0, 0];\r\n\t\t\t}\r\n\t\t\t// animating/drawing code goes here\r\n\r\n\t\t\trender();\r\n\t\t}, 1000 / FRAMES_PER_SECOND);\r\n\t}\r\n\r\n\tlet SCREEN_WIDTH = $(\"#helper\").width();\r\n\tlet SCREEN_HEIGHT = $(\"#helper\").height();\r\n\r\n\tlet container;\r\n\tlet camera, scene, renderer, grid;\r\n\tlet cameraRig;\r\n\tlet cameraPerspective;\r\n\tlet cameraPerspectiveHelper;\r\n\r\n\tlet cameraOrtho, cameraOrthoHelper;\r\n\r\n\tlet geometry = new THREE.SphereGeometry(SPHERE_DIAMETER, 32, 32);\r\n\tlet materialRight = new THREE.MeshBasicMaterial({\r\n\t\tcolor: 0xff0000 // red\r\n\t});\r\n\tlet materialLeft = new THREE.MeshBasicMaterial({\r\n\t\tcolor: 0x0000ff // blue\r\n\t});\r\n\r\n\tlet sphere = {\r\n\t\tleft: [],\r\n\t\tright: []\r\n\t};\r\n\r\n\tlet pos = [\r\n\t\t[-1, -1], // front-left\r\n\t\t[1, -1], // front-right\r\n\t\t[-1, 1], // back-left\r\n\t\t[1, 1], // back-right\r\n\t];\r\n\r\n\tinit();\r\n\tanimate();\r\n\r\n\tfunction init() {\r\n\r\n\t\tcontainer = document.getElementById(\"helper\");\r\n\t\t//\t\t\tcontainer = document.createElement( 'div' );\r\n\t\t//\t\t\tdocument.body.appendChild( container );\r\n\r\n\t\tscene = new THREE.Scene();\r\n\r\n\t\tcameraPerspective = new THREE.PerspectiveCamera(50, SCREEN_WIDTH / SCREEN_HEIGHT, 150, 1200);\r\n\t\tcameraPerspective.fov = 15;\r\n\r\n\t\tcameraPerspectiveHelper = new THREE.CameraHelper(cameraPerspective);\r\n\t\tscene.add(cameraPerspectiveHelper);\r\n\r\n\t\tcamera = new THREE.PerspectiveCamera(50, SCREEN_WIDTH / SCREEN_HEIGHT, 1, 10000);\r\n\t\tcamera.position.y = 1000;\r\n\t\tcamera.position.z = 2000;\r\n\t\tcamera.lookAt(cameraPerspective.position);\r\n\r\n\t\t//\r\n\t\tcameraOrtho = new THREE.OrthographicCamera(0.5 * SCREEN_WIDTH / -2, 0.5 * SCREEN_WIDTH / 2, SCREEN_HEIGHT / 2, SCREEN_HEIGHT / -2, 150, 3000);\r\n\t\tcameraOrthoHelper = new THREE.CameraHelper(cameraOrtho);\r\n\t\tscene.add(cameraOrthoHelper);\r\n\t\t//\r\n\r\n\t\t// counteract different front orientation of cameras vs rig\r\n\r\n\t\tcameraOrtho.rotation.y = Math.PI / 2;\r\n\t\tcameraPerspective.rotation.y = 0;\r\n\r\n\t\tcameraRig = new THREE.Object3D();\r\n\t\tcameraRig.add(cameraPerspective);\r\n\t\tcameraRig.add(cameraOrtho);\r\n\r\n\t\t//cameraRig.up = new THREE.Vector3(0, 1, 0);\r\n\t\t// cameraRig.rotation.up = new THREE.Vector3(0, 1, 0);\r\n\r\n\t\tcameraRig.position.set(0, 0, 0);\r\n\r\n\t\tscene.add(cameraRig);\r\n\r\n\r\n\t\tfor (let i = 0; i < 4; i++) {\r\n\t\t\tsphere.left[i] = new THREE.Mesh(geometry, materialLeft);\r\n\t\t\tsphere.right[i] = new THREE.Mesh(geometry, materialRight);\r\n\r\n\t\t\tsphere.left[i].position.x = 800 * (pos[i][0] - pos[i][1] * 0.1);\r\n\t\t\tsphere.left[i].position.y = 0;\r\n\t\t\tsphere.left[i].position.z = 800 * (pos[i][1] + pos[i][0] * 0.1);\r\n\r\n\t\t\tsphere.right[i].position.x = 800 * (pos[i][0] + pos[i][1] * 0.1);\r\n\t\t\tsphere.right[i].position.y = 0;\r\n\t\t\tsphere.right[i].position.z = 800 * (pos[i][1] - pos[i][0] * 0.1);\r\n\r\n\t\t\tscene.add(sphere.left[i]);\r\n\t\t\tscene.add(sphere.right[i]);\r\n\t\t}\r\n\r\n\t\tfor (let i = 4; i < 8; i++) {\r\n\t\t\tsphere.left[i] = new THREE.Mesh(geometry, materialLeft);\r\n\t\t\tsphere.right[i] = new THREE.Mesh(geometry, materialRight);\r\n\r\n\t\t\tsphere.left[i].position.x = 800 * (pos[i - 4][0] - pos[i - 4][1] * 0.1);\r\n\t\t\tsphere.left[i].position.y = POS_Y_H_SPHERE;\r\n\t\t\tsphere.left[i].position.z = 800 * (pos[i - 4][1] + pos[i - 4][0] * 0.1);\r\n\r\n\t\t\tsphere.right[i].position.x = 800 * (pos[i - 4][0] + pos[i - 4][1] * 0.1);\r\n\t\t\tsphere.right[i].position.y = POS_Y_H_SPHERE;\r\n\t\t\tsphere.right[i].position.z = 800 * (pos[i - 4][1] - pos[i - 4][0] * 0.1);\r\n\r\n\t\t\tscene.add(sphere.left[i]);\r\n\t\t\tscene.add(sphere.right[i]);\r\n\t\t}\r\n\r\n\t\t// ------------------------\r\n\r\n\t\tgrid = new THREE.GridHelper(3000, 20);\r\n\t\tgrid.material.transparent = true;\r\n\t\tgrid.setColors(0x555555, 0xbbbbbb);\r\n\t\t// grid.position.y = -200;\r\n\t\tscene.add(grid);\r\n\r\n\t\t// let particles = new THREE.PointCloud( geometry, new THREE.PointCloudMaterial( { color: 0x888888 } ) );\r\n\t\t// scene.add( particles );\r\n\r\n\t\trenderer = new THREE.WebGLRenderer({\r\n\t\t\tantialias: true,\r\n\t\t\talpha: true\r\n\t\t});\r\n\t\trenderer.setClearColor(0xeeeeee, 1); // the default\r\n\t\trenderer.setSize(SCREEN_WIDTH, SCREEN_HEIGHT);\r\n\t\trenderer.domElement.style.position = \"relative\";\r\n\t\tcontainer.appendChild(renderer.domElement);\r\n\r\n\t\trenderer.autoClear = false;\r\n\r\n\t\twindow.addEventListener('resize', onWindowResize, false);\r\n\t}\r\n\r\n\tfunction onWindowResize(event) {\r\n\r\n\t\tSCREEN_WIDTH = $(\"#helper\").width();\r\n\t\tSCREEN_HEIGHT = $(\"#helper\").height();\r\n\r\n\t\trenderer.setSize(SCREEN_WIDTH, SCREEN_HEIGHT);\r\n\r\n\t\tcamera.aspect = SCREEN_WIDTH / SCREEN_HEIGHT;\r\n\t\tcamera.updateProjectionMatrix();\r\n\r\n\t\tcameraPerspective.aspect = SCREEN_WIDTH / SCREEN_HEIGHT;\r\n\t\tcameraPerspective.updateProjectionMatrix();\r\n\t}\r\n\r\n\r\n\t// ????? MAGIC\r\n\tfunction __DELETE_THIS____animate() {\r\n\t\trequestAnimationFrame(animate);\r\n\t\trender();\r\n\t\t// controls.update();\r\n\t}\r\n\r\n\r\n\tfunction render() {\r\n\t\tcameraPerspective.updateProjectionMatrix();\r\n\t\tcameraPerspectiveHelper.update();\r\n\t\tcameraPerspectiveHelper.visible = true;\r\n\t\tcameraOrthoHelper.visible = false;\r\n\r\n\t\t//cameraRig.lookAt( mesh.position );\r\n\t\tlet volumes = sound.getVolumes();\r\n\r\n\t\tfor (let i = 0; i < 8; i++) {\r\n\t\t\tif (volumes.left[i] == 0) {\r\n\t\t\t\tsphere.left[i].visible = false;\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tsphere.left[i].visible = true;\r\n\t\t\t\tsphere.left[i].scale.set(volumes.left[i], volumes.left[i], volumes.left[i]);\r\n\t\t\t}\r\n\r\n\t\t\tif (volumes.right[i] == 0) {\r\n\t\t\t\tsphere.right[i].visible = false;\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tsphere.right[i].visible = true;\r\n\t\t\t\tsphere.right[i].scale.set(volumes.right[i], volumes.right[i], volumes.right[i]);\r\n\t\t\t}\r\n\t\t\t//  sphere[i].scale.set((i+1)*2,(i+1)*2,(i+1)*2);\r\n\t\t}\r\n\t\t// sphere[3].scale.set(10,10,10);\r\n\r\n\t\tcameraRig.rotation.set(0, 0, 0);\r\n\t\tcameraRig.rotateOnAxis((new THREE.Vector3(0, 1, 0)).normalize(), cameraRotationAngle[0] * Math.PI / 180);\r\n\t\tcameraRig.rotateOnAxis((new THREE.Vector3(1, 0, 0)).normalize(), cameraRotationAngle[1] * Math.PI / 180);\r\n\r\n\t\trenderer.clear();\r\n\r\n\t\tgrid.material.opacity = 0.1;\r\n\r\n\t\trenderer.setViewport(0, 0, SCREEN_WIDTH, SCREEN_HEIGHT);\r\n\t\trenderer.render(scene, camera);\r\n\t}\r\n\r\n}\n\n\n// WEBPACK FOOTER //\n// ./_mainJs.js","var g;\r\n\r\n// This works in non-strict mode\r\ng = (function() {\r\n\treturn this;\r\n})();\r\n\r\ntry {\r\n\t// This works if eval is allowed (see CSP)\r\n\tg = g || Function(\"return this\")() || (1,eval)(\"this\");\r\n} catch(e) {\r\n\t// This works if the window reference is available\r\n\tif(typeof window === \"object\")\r\n\t\tg = window;\r\n}\r\n\r\n// g can still be undefined, but nothing to do about it...\r\n// We return undefined, instead of nothing here, so it's\r\n// easier to handle this case. if(!global) { ...}\r\n\r\nmodule.exports = g;\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../~/webpack/buildin/global.js\n// module id = 52\n// module chunks = 0 2","\"use strict\";\r\n\r\nrequire('promise-decode-audio-data');\r\n\r\nconst eightChannelsAlgorithm = require('./channelAlg').eightChannelsAlgorithm;\r\n\r\nconst SOUND_COUNT = 8 * 2;\r\n\r\n/*\r\n setVolumes +\r\n getVolumes +\r\n updateVolumes\r\n ----------- Sound3D_OldVersion: Sound3D_OldVersion,\r\n ----------- getAudio: getAudio,\r\n play +\r\n pause +\r\n rewind +\r\n stop +\r\n isReady +\r\n remove +\r\n ----------- soundSync\r\n currentTime +\r\n* */\r\n\r\nlet preloadCache = {};\r\n\r\nfunction initArray(count) {\r\n\tlet arr = [];\r\n\tarr.length = count;\r\n\r\n\tarr.forEach((i, el, arr) => arr[i] = 0);\r\n\r\n\treturn arr;\r\n}\r\n\r\nfunction Sound(audioFiles) {\r\n\tconst audioCtx = new AudioContext();\r\n\tlet thus = this;\r\n\r\n\tlet smp = initArray(SOUND_COUNT);\r\n\tlet gainNode = initArray(SOUND_COUNT);\r\n\tlet volumes = initArray(SOUND_COUNT);\r\n\tlet pannerNode = initArray(SOUND_COUNT);\r\n\tlet buffer = initArray(audioFiles.length);\r\n\tlet isSoundReady = false;\r\n\tlet countOfReadySound = 0;\r\n\r\n\tlet isPlay = false;\r\n\tlet isDelete = false;\r\n\tlet startTime = 0;\r\n\tlet stopTime = 0;\r\n\r\n\r\n\tfunction preload(path, i) {\r\n\t\tconsole.time('load file' + path);\r\n\r\n\t\tfetch(path, {\r\n\t\t\tmethod: 'GET',\r\n\t\t\tresponseType: 'arrayBuffer',\r\n\t\t\tcache: 'force-cache'\r\n\t\t}).then((res) => {\r\n\t\t\treturn res.arrayBuffer();\r\n\t\t}).then((blob) => {\r\n\t\t\tif (preloadCache[path])\r\n\t\t\t{\r\n\t\t\t\treturn Promise.resolve(preloadCache[path]);\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\treturn audioCtx.decodeAudioData(blob);\r\n\t\t\t}\r\n\t\t}).then((aBuffer) => {\r\n\t\t\tbuffer[Math.floor(i / 2)] = aBuffer;\r\n\r\n\t\t\tif (!preloadCache[path])\r\n\t\t\t{\r\n\t\t\t\tpreloadCache[path] = aBuffer;\r\n\t\t\t}\r\n\r\n\t\t\treturn i;\r\n\t\t}).then((i) => {\r\n\t\t\tconsole.log('Sound {path: ' + path + ', i: ' + i + ', ' + (i + 1) + '} loaded');\r\n\r\n\t\t\tconsole.timeEnd('load file' + path);\r\n\t\t\tcountOfReadySound += 2;\r\n\t\t\tisSoundReady = (SOUND_COUNT == countOfReadySound);\r\n\t\t}).catch((err) => {\r\n\t\t\tconsole.warn(err);\r\n\t\t});\r\n\t}\r\n\r\n\r\n\tfunction createAudio(time) {\r\n\t\tif (thus.isReady() && !isPlay)\r\n\t\t{\r\n\t\t\tfor (let i = 0, j = 0; j < buffer.length; ++j, i += 2)\r\n\t\t\t{\r\n\t\t\t\t// left\r\n\t\t\t\tsmp[i] = audioCtx.createBufferSource();\r\n\t\t\t\tsmp[i].buffer = buffer[j];\r\n\r\n\t\t\t\tgainNode[i] = audioCtx.createGain();\r\n\t\t\t\tgainNode[i].gain.value = 0;\r\n\r\n\t\t\t\tpannerNode[i] = audioCtx.createPanner();\r\n\t\t\t\tpannerNode[i].setPosition(-1, 0, 0);\r\n\t\t\t\tpannerNode[i].panningModel = \"equalpower\";\r\n\r\n\r\n\t\t\t\tsmp[i].connect(pannerNode[i]);\r\n\t\t\t\tpannerNode[i].connect(gainNode[i]);\r\n\t\t\t\tgainNode[i].connect(audioCtx.destination);\r\n\r\n\t\t\t\t// right\r\n\t\t\t\tsmp[i + 1] = audioCtx.createBufferSource();\r\n\t\t\t\tsmp[i + 1].buffer = buffer[j];\r\n\r\n\t\t\t\tgainNode[i + 1] = audioCtx.createGain();\r\n\t\t\t\tgainNode[i + 1].gain.value = 0;\r\n\r\n\t\t\t\tpannerNode[i + 1] = audioCtx.createPanner();\r\n\t\t\t\tpannerNode[i + 1].setPosition(1, 0, 0); // must be (1, 0, 0)\r\n\t\t\t\tpannerNode[i + 1].panningModel = \"equalpower\";\r\n\r\n\t\t\t\tsmp[i + 1].connect(pannerNode[i + 1]);\r\n\t\t\t\tpannerNode[i + 1].connect(gainNode[i + 1]);\r\n\t\t\t\tgainNode[i + 1].connect(audioCtx.destination);\r\n\t\t\t}\r\n\r\n            for (let i = 0; i < SOUND_COUNT; ++i)\r\n            {\r\n                smp[i].start(0, time);\r\n            }\r\n\r\n            startTime = audioCtx.currentTime - time;\r\n\t\t\tisPlay = true;\r\n        }\r\n    }\r\n\r\n\r\n\tthis.isReady = function () {\r\n\t\treturn isSoundReady && !isDelete;\r\n\t};\r\n\r\n\tthis.play = function (time = thus.currentTime()) {\r\n\t\tif (this.isReady() && !isPlay && !isDelete)\r\n\t\t{\r\n\t\t\tcreateAudio(time);\r\n\r\n\t\t\tsetVolumes();\r\n\t\t}\r\n\t};\r\n\r\n\tthis.pause = function () {\r\n\t\tthis.stop();\r\n\t};\r\n\r\n\tthis.stop = function () {\r\n        if (this.isReady() && isPlay && !isDelete)\r\n        {\r\n            isPlay = false;\r\n\r\n            stopTime = audioCtx.currentTime;\r\n\r\n            for (let i = 0; i < smp.length; ++i)\r\n            {\r\n                smp[i].stop();\r\n\r\n                if (typeof smp[i].disconnect == 'function')\r\n\t                smp[i].disconnect();\r\n            }\r\n        }\r\n\t};\r\n\r\n\tthis.remove = function () {\r\n\t\tif (this.isReady())\r\n\t\t{\r\n            for (let i = 0; i < smp.length; ++i)\r\n            {\r\n                smp[i].stop();\r\n            }\r\n        }\r\n\r\n\t\tisDelete = true;\r\n\t};\r\n\r\n\tthis.currentTime = function () {\r\n\t\tif (!this.isReady() || !isPlay)\r\n\t\t{\r\n\t\t\treturn stopTime - startTime > 0 ? stopTime - startTime : 0;\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\treturn audioCtx.currentTime - startTime;\r\n\t\t}\r\n\t};\r\n\r\n\tthis.rewind = function (time) {\r\n\t\tif (time < 0)\r\n\t\t{\r\n\t\t\ttime = 0;\r\n\t\t}\r\n\r\n\t\tthis.stop();\r\n\t\tthis.play(time);\r\n\r\n\t\tconsole.log('rewind');\r\n\t};\r\n\r\n\tthis.getVolumes = function () {\r\n\t\treturn volumes;\r\n\t};\r\n\r\n\tfunction setVolumes() {\r\n\t\tif (thus.isReady() && isPlay)\r\n\t\t{\r\n\t\t\tfor (let i = 0; i < smp.length; ++i)\r\n\t\t\t{\r\n\t\t\t\tgainNode[i].gain.value = volumes[i];\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tthis.updateVolumes = function(yaw, pitch, roll = 0) {\r\n\t\tlet vols = eightChannelsAlgorithm(yaw, pitch, roll);\r\n\r\n\t\tfor (let i = 0; i < SOUND_COUNT; ++i) {\r\n\t\t\tvolumes[i] = vols[i];\r\n\t\t}\r\n\r\n\t\tif (isPlay)\r\n\t\t{\r\n            setVolumes();\r\n\t\t}\r\n\t};\r\n\r\n\tfor (let i = 0; i < audioFiles.length; ++i)\r\n\t{\r\n\t\tpreload(audioFiles[i], i * 2);\r\n\t}\r\n\r\n\treturn this;\r\n}\r\n\r\n/*\r\nfunction Sound(audioFiles, player) {\r\n\tlet audio = {\r\n\t\tleft: [8],\r\n\t\tright: [8]\r\n\t};\r\n\r\n\tlet statusEl = document.getElementById(\"status\");\r\n\tlet voidEl = document.getElementById('void');\r\n\r\n\tlet isDelete = false;\r\n\r\n\tlet delta = 0;\r\n\r\n\tlet _volumes = {\r\n\t\tleft: [8],\r\n\t\tright: [8]\r\n\t};\r\n\r\n\tlet __TEST__timeShift = {\r\n\t\tleft: [1, 0, 0, 1, 1, 0, 0, 1],\r\n\t\tright: [1, 0, 0, 1, 1, 0, 0, 1]\r\n\t};\r\n\r\n\tlet __TEST__shift = 0;\r\n\r\n\tlet loaded = false;\r\n\tlet loadedCount = 0;\r\n\r\n\tlet isPlay = false;\r\n\tlet isSoundReady = false;\r\n\r\n\tlet maxPhaseError = 0;\r\n\r\n\r\n\tfunction preloadAudio(i, side) {\r\n\t\taudio[side][i] = new Audio();\r\n\t\taudio[side][i].preload = 'auto';\r\n\t\taudio[side][i].addEventListener('canplaythrough', loadedAudio, false);\r\n\t\taudio[side][i].src = audioFiles[side][i];\r\n\t}\r\n\r\n\tfunction loadedAudio() {\r\n\t\tif (!loaded) {\r\n\t\t\tloadedCount++;\r\n\t\t\tloaded = (loadedCount == audioFiles.left.length + audioFiles.right.length);\r\n\r\n\t\t\tisSoundReady = loaded;\r\n\t\t\tstatusEl.innerHTML = \"loaded: \" + (100 * loadedCount / (audioFiles.left.length + audioFiles.right.length));\r\n\t\t}\r\n\t}\r\n\r\n\tfunction Sound3D_OldVersion(angle) {\r\n\t\tlet volumes = [0.0, 0.0, 0.0, 0.0];\r\n\r\n\t\tvolumes[0] = 1.0 - Math.min(1.0, Math.min(360 - angle, angle) / 90.0);\r\n\t\tvolumes[1] = 1.0 - Math.min(1.0, Math.abs(90 - angle, angle) / 90.0);\r\n\t\tvolumes[2] = 1.0 - Math.min(1.0, Math.abs(180 - angle, angle) / 90.0);\r\n\t\tvolumes[3] = 1.0 - Math.min(1.0, Math.abs(270 - angle, angle) / 90.0);\r\n\r\n\t\treturn volumes;\r\n\t}\r\n\r\n\tfunction setVolumeOnSide(volumes, side) {\r\n\t\tfor (let i in volumes[side]) {\r\n\t\t\tif (volumes[side].hasOwnProperty(i)) {\r\n\t\t\t\tif (volumes[side][i] < 0 || volumes[side][i] > 1) {\r\n\t\t\t\t\tconsole.warn('Volumes error(out of range):' + volumes);\r\n\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfor (let i in audio[side]) {\r\n\t\t\taudio[side][i].volume = volumes[side][i];\r\n\t\t}\r\n\t}\r\n\r\n\tfunction getVolumes() {\r\n\t\treturn _volumes;\r\n\t}\r\n\r\n\tfunction setVolumes(volumes = _volumes) {\r\n\t\tif (isReady() && !isDelete)\r\n\t\t{\r\n\t\t\tsetVolumeOnSide(volumes, 'left');\r\n\t\t\tsetVolumeOnSide(volumes, 'right');\r\n\r\n\t\t\t_volumes = volumes;\r\n\t\t}\r\n\r\n\t\treturn getVolumes();\r\n\t}\r\n\r\n\tfunction __TEST__soundSync(d) {\r\n\t\t__TEST__shift = d;\r\n\t}\r\n\r\n\tfunction rewind(time) {\r\n\t\tif (time < 0) {\r\n\t\t\ttime = 0;\r\n\t\t}\r\n\r\n\t\tfor (let side of ['left', 'right']) {\r\n\t\t\tfor (let i in audio[side]) {\r\n\t\t\t\tif (audio[side][i].duration < time) {\r\n\t\t\t\t\tconsole.warn('Rewind(out of range):' + time + ' > ' + audioFiles[side][i] + '.duration = ' + audio[side][i].duration);\r\n\t\t\t\t\tstop();\r\n\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\taudio[side][i].currentTime = time + __TEST__timeShift[side][i] * __TEST__shift / 1000;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tfunction getAudio() {\r\n\t\treturn audio;\r\n\t}\r\n\r\n\tfunction play() {\r\n\t\tif (!isPlay && !isDelete) {\r\n\t\t\tfor (let side of ['left', 'right']) {\r\n\t\t\t\tfor (let i in audio[side]) {\r\n\t\t\t\t\taudio[side][i].play();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tisPlay = true;\r\n\t\t}\r\n\t}\r\n\r\n\tfunction pause() {\r\n\t\tif (isPlay && !isDelete) {\r\n\t\t\tfor (let side of ['left', 'right']) {\r\n\t\t\t\tfor (let i in audio[side]) {\r\n\t\t\t\t\taudio[side][i].pause();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tisPlay = false;\r\n\t\t}\r\n\t}\r\n\r\n\tfunction stop() {\r\n\t\trewind(0);\r\n\t\tpause();\r\n\t}\r\n\r\n\tfunction isReady() {\r\n\t\treturn isSoundReady\r\n\t}\r\n\r\n\tfunction currentTime() {\r\n\t\treturn (audio['left'][0].currentTime + audio['right'][0].currentTime) / 2;\r\n\t}\r\n\r\n\tfunction updateVolumes(yaw, pitch, roll = 0) {\r\n\t\tlet vols = eightChannelsAlgorithm(yaw, pitch, roll);\r\n\r\n\t\tfor (let i = 0; i < 8; ++i) {\r\n\t\t\t_volumes.left[i] = vols[2 * i];\r\n\t\t}\r\n\r\n\t\tfor (let i = 0; i < 8; ++i) {\r\n\t\t\t_volumes.right[i] = vols[2 * i + 1];\r\n\t\t}\r\n\r\n\t\tsetVolumes();\r\n\r\n\t\treturn delta;\r\n\t}\r\n\r\n\tfunction remove() {\r\n\t\tstop();\r\n\r\n\t\tclearInterval(logTimeout);\r\n\r\n\t\tstatusEl = voidEl;\r\n\t\tisDelete = true;\r\n\t}\r\n\r\n\t// auto start preloading\r\n\tfor (let i in audioFiles.left) {\r\n\t\tpreloadAudio(i, 'left');\r\n\t}\r\n\tfor (let i in audioFiles.right) {\r\n\t\tpreloadAudio(i, 'right');\r\n\t}\r\n\r\n\tlet logTimeout = setInterval(function () {\r\n\t\tif (loaded) {\r\n\t\t\tlet min = 3600; // hour\r\n\t\t\tlet max = 0;\r\n\r\n\t\t\tstatusEl.innerHTML = \"currentTime: <br/>\";\r\n\r\n\t\t\tfor (let side of ['left', 'right']) {\r\n\t\t\t\tfor (let i in audio[side]) {\r\n\t\t\t\t\tlet pos = audio[side][i].currentTime;\r\n\t\t\t\t\tif (pos < min) {\r\n\t\t\t\t\t\tmin = pos;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (pos > max) {\r\n\t\t\t\t\t\tmax = pos;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// statusEl.innerHTML += audioFiles[side][i] + \". \" + pos + \" , volume: \" + audio[side][i].volume + \"<br/>\";\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif ((max - min) * 1000 > maxPhaseError) {\r\n\t\t\t\tmaxPhaseError = (max - min) * 1000;\r\n\t\t\t}\r\n\r\n\t\t\tdelta = (max - min) * 1000;\r\n\r\n\t\t\tstatusEl.innerHTML += \"sound: \" + (currentTime() * 1000).toFixed() + \"ms\";\r\n\t\t\tstatusEl.innerHTML += \"<br/>\" + \"<br/>phase error: \" + ((max - min) * 1000).toFixed() + \"ms<br/>\";\r\n\t\t\tstatusEl.innerHTML += \"max phase error: \" + maxPhaseError.toFixed() + \"ms<br/>\";\r\n\t\t\tstatusEl.innerHTML += \"<br/>player: \" + (player.currentTime() * 1000).toFixed() + \"ms<br/>\";\r\n\t\t\tstatusEl.innerHTML += \"player/sound error: \" +\r\n\t\t\t\t((player.currentTime() - audio['left'][0].currentTime) * 1000).toFixed() + \"ms<br/>\";\r\n\r\n\t\t}\r\n\t}, 100);\r\n\r\n\treturn {\r\n\t\tsetVolumes: setVolumes,\r\n\t\tgetVolumes: getVolumes,\r\n\t\tupdateVolumes: updateVolumes,\r\n\t\tSound3D_OldVersion: Sound3D_OldVersion,\r\n\t\tgetAudio: getAudio,\r\n\t\tplay: play,\r\n\t\tpause: pause,\r\n\t\trewind: rewind,\r\n\t\tstop: stop,\r\n\t\tisReady: isReady,\r\n\t\tremove: remove,\r\n\t\tsoundSync: __TEST__soundSync,\r\n\t\tcurrentTime: currentTime\r\n\t};\r\n}\r\n*/\r\n\r\nmodule.exports = Sound;\n\n\n// WEBPACK FOOTER //\n// ./sound.js","(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})\n\n\n// WEBPACK FOOTER //\n// node_modules/browserify/~/browser-pack/_prelude.js","'use strict';\n\nfunction Intervalometer(cb) {\n\tvar rafId = void 0;\n\tvar previousLoopTime = void 0;\n\tfunction loop(now) {\n\t\t// must be requested before cb() because that might call .stop()\n\t\trafId = requestAnimationFrame(loop);\n\t\tcb(now - (previousLoopTime || now)); // ms since last call. 0 on start()\n\t\tpreviousLoopTime = now;\n\t}\n\tthis.start = function () {\n\t\tif (!rafId) {\n\t\t\t// prevent double starts\n\t\t\tloop(0);\n\t\t}\n\t};\n\tthis.stop = function () {\n\t\tcancelAnimationFrame(rafId);\n\t\trafId = null;\n\t\tpreviousLoopTime = 0;\n\t};\n}\n\nfunction preventEvent(element, eventName, toggleProperty, preventWithProperty) {\n\tfunction handler(e) {\n\t\tif (Boolean(element[toggleProperty]) === Boolean(preventWithProperty)) {\n\t\t\te.stopImmediatePropagation();\n\t\t\t// console.log(eventName, 'prevented on', element);\n\t\t}\n\t\tdelete element[toggleProperty];\n\t}\n\telement.addEventListener(eventName, handler, false);\n\n\t// Return handler to allow to disable the prevention. Usage:\n\t// const preventionHandler = preventEvent(el, 'click');\n\t// el.removeEventHandler('click', preventionHandler);\n\treturn handler;\n}\n\nfunction proxyProperty(object, propertyName, sourceObject, copyFirst) {\n\tfunction get() {\n\t\treturn sourceObject[propertyName];\n\t}\n\tfunction set(value) {\n\t\tsourceObject[propertyName] = value;\n\t}\n\n\tif (copyFirst) {\n\t\tset(object[propertyName]);\n\t}\n\n\tObject.defineProperty(object, propertyName, { get: get, set: set });\n}\n\n/*\nFile imported from: https://github.com/bfred-it/poor-mans-symbol\nUntil I configure rollup to import external libs into the IIFE bundle\n*/\n\nvar _Symbol = typeof Symbol === 'undefined' ? function (description) {\n\treturn '@' + (description || '@') + Math.random();\n} : Symbol;\n\nvar isNeeded = /iPhone|iPod/i.test(navigator.userAgent);\n\nvar  = _Symbol();\nvar event = _Symbol();\nvar play = _Symbol('nativeplay');\nvar pause = _Symbol('nativepause');\n\n/**\n * UTILS\n */\n\nfunction getAudioFromVideo(video) {\n\tvar audio = new Audio();\n\taudio.src = video.currentSrc || video.src;\n\taudio.crossOrigin = video.crossOrigin;\n\treturn audio;\n}\n\nvar lastRequests = [];\nlastRequests.i = 0;\n\nfunction setTime(video, time) {\n\t// allow one timeupdate event every 200+ ms\n\tif ((lastRequests.tue || 0) + 200 < Date.now()) {\n\t\tvideo[event] = true;\n\t\tlastRequests.tue = Date.now();\n\t}\n\tvideo.currentTime = time;\n\tlastRequests[++lastRequests.i % 3] = time * 100 | 0 / 100;\n}\n\nfunction isPlayerEnded(player) {\n\treturn player.driver.currentTime >= player.video.duration;\n}\n\nfunction update(timeDiff) {\n\t// console.log('update');\n\tvar player = this;\n\tif (player.video.readyState >= player.video.HAVE_FUTURE_DATA) {\n\t\tif (!player.hasAudio) {\n\t\t\tplayer.driver.currentTime = player.video.currentTime + timeDiff * player.video.playbackRate / 1000;\n\t\t\tif (player.video.loop && isPlayerEnded(player)) {\n\t\t\t\tplayer.driver.currentTime = 0;\n\t\t\t}\n\t\t}\n\t\tsetTime(player.video, player.driver.currentTime);\n\t}\n\n\t// console.assert(player.video.currentTime === player.driver.currentTime, 'Video not updating!');\n\n\tif (player.video.ended) {\n\t\tplayer.video.pause(true);\n\t}\n}\n\n/**\n * METHODS\n */\n\nfunction play() {\n\t// console.log('play')\n\tvar video = this;\n\tvar player = video[];\n\n\t// if it's fullscreen, the developer the native player\n\tif (video.webkitDisplayingFullscreen) {\n\t\tvideo[play]();\n\t\treturn;\n\t}\n\n\tif (!video.paused) {\n\t\treturn;\n\t}\n\tplayer.paused = false;\n\n\tif (!video.buffered.length) {\n\t\tvideo.load();\n\t}\n\n\tplayer.driver.play();\n\tplayer.updater.start();\n\n\tvideo.dispatchEvent(new Event('play'));\n\n\t// TODO: should be fired later\n\tvideo.dispatchEvent(new Event('playing'));\n}\nfunction pause(forceEvents) {\n\t// console.log('pause')\n\tvar video = this;\n\tvar player = video[];\n\n\tplayer.driver.pause();\n\tplayer.updater.stop();\n\n\t// if it's fullscreen, the developer the native player.pause()\n\t// This is at the end of pause() because it also\n\t// needs to make sure that the simulation is paused\n\tif (video.webkitDisplayingFullscreen) {\n\t\tvideo[pause]();\n\t}\n\n\tif (player.paused && !forceEvents) {\n\t\treturn;\n\t}\n\n\tplayer.paused = true;\n\tvideo.dispatchEvent(new Event('pause'));\n\tif (video.ended) {\n\t\tvideo[event] = true;\n\t\tvideo.dispatchEvent(new Event('ended'));\n\t}\n}\n\n/**\n * SETUP\n */\n\nfunction addPlayer(video, hasAudio) {\n\tvar player = video[] = {};\n\tplayer.paused = true; // track whether 'pause' events have been fired\n\tplayer.hasAudio = hasAudio;\n\tplayer.video = video;\n\tplayer.updater = new Intervalometer(update.bind(player));\n\n\tif (hasAudio) {\n\t\tplayer.driver = getAudioFromVideo(video);\n\t} else {\n\t\tplayer.driver = {\n\t\t\tmuted: true,\n\t\t\tpaused: true,\n\t\t\tpause: function pause() {\n\t\t\t\tplayer.driver.paused = true;\n\t\t\t},\n\t\t\tplay: function play() {\n\t\t\t\tplayer.driver.paused = false;\n\t\t\t\t// media automatically goes to 0 if .play() is called when it's done\n\t\t\t\tif (isPlayerEnded(player)) {\n\t\t\t\t\tsetTime(video, 0);\n\t\t\t\t}\n\t\t\t},\n\t\t\tget ended() {\n\t\t\t\treturn isPlayerEnded(player);\n\t\t\t}\n\t\t};\n\t}\n\n\t// .load() causes the emptied event\n\t// the alternative is .play()+.pause() but that triggers play/pause events, even worse\n\t// possibly the alternative is preventing this event only once\n\tvideo.addEventListener('emptied', function () {\n\t\tif (player.driver.src && player.driver.src !== video.currentSrc) {\n\t\t\t// console.log('src changed', video.currentSrc);\n\t\t\tsetTime(video, 0);\n\t\t\tvideo.pause();\n\t\t\tplayer.driver.src = video.currentSrc;\n\t\t}\n\t}, false);\n\n\t// stop programmatic player when OS takes over\n\tvideo.addEventListener('webkitbeginfullscreen', function () {\n\t\tif (!video.paused) {\n\t\t\t// make sure that the <audio> and the syncer/updater are stopped\n\t\t\tvideo.pause();\n\n\t\t\t// play video natively\n\t\t\tvideo[play]();\n\t\t} else if (hasAudio && !player.driver.buffered.length) {\n\t\t\t// if the first play is native,\n\t\t\t// the <audio> needs to be buffered manually\n\t\t\t// so when the fullscreen ends, it can be set to the same current time\n\t\t\tplayer.driver.load();\n\t\t}\n\t});\n\tif (hasAudio) {\n\t\tvideo.addEventListener('webkitendfullscreen', function () {\n\t\t\t// sync audio to new video position\n\t\t\tplayer.driver.currentTime = video.currentTime;\n\t\t\t// console.assert(player.driver.currentTime === video.currentTime, 'Audio not synced');\n\t\t});\n\n\t\t// allow seeking\n\t\tvideo.addEventListener('seeking', function () {\n\t\t\tif (lastRequests.indexOf(video.currentTime * 100 | 0 / 100) < 0) {\n\t\t\t\t// console.log('User-requested seeking');\n\t\t\t\tplayer.driver.currentTime = video.currentTime;\n\t\t\t}\n\t\t});\n\t}\n}\n\nfunction overloadAPI(video) {\n\tvar player = video[];\n\tvideo[play] = video.play;\n\tvideo[pause] = video.pause;\n\tvideo.play = play;\n\tvideo.pause = pause;\n\tproxyProperty(video, 'paused', player.driver);\n\tproxyProperty(video, 'muted', player.driver, true);\n\tproxyProperty(video, 'playbackRate', player.driver, true);\n\tproxyProperty(video, 'ended', player.driver);\n\tproxyProperty(video, 'loop', player.driver, true);\n\tpreventEvent(video, 'seeking');\n\tpreventEvent(video, 'seeked');\n\tpreventEvent(video, 'timeupdate', event, false);\n\tpreventEvent(video, 'ended', event, false); // prevent occasional native ended events\n}\n\nfunction enableInlineVideo(video) {\n\tvar hasAudio = arguments.length <= 1 || arguments[1] === undefined ? true : arguments[1];\n\tvar onlyWhenNeeded = arguments.length <= 2 || arguments[2] === undefined ? true : arguments[2];\n\n\tif (onlyWhenNeeded && !isNeeded || video[]) {\n\t\treturn;\n\t}\n\taddPlayer(video, hasAudio);\n\toverloadAPI(video);\n\tvideo.classList.add('IIV');\n\tif (!hasAudio && video.autoplay) {\n\t\tvideo.play();\n\t}\n}\n\nmodule.exports = enableInlineVideo;\n\n\n// WEBPACK FOOTER //\n// node_modules/iphone-inline-video/dist/iphone-inline-video.common-js.js","/**\n * Created by yanwsh on 4/3/16.\n */\nimport Detector from '../lib/Detector';\nimport MobileBuffering from '../lib/MobileBuffering';\n\nconst HAVE_ENOUGH_DATA = 4;\n\nvar Canvas = function (baseComponent, settings = {}) {\n    return {\n        constructor: function init(player, options){\n            this.settings = options;\n            this.width = player.el().offsetWidth, this.height = player.el().offsetHeight;\n            this.lon = options.initLon, this.lat = options.initLat, this.phi = 0, this.theta = 0;\n            this.videoType = options.videoType;\n            this.clickToToggle = options.clickToToggle;\n            this.mouseDown = false;\n            this.isUserInteracting = false;\n            //define scene\n            this.scene = new THREE.Scene();\n            //define camera\n            this.camera = new THREE.PerspectiveCamera(options.initFov, this.width / this.height, 1, 2000);\n            this.camera.target = new THREE.Vector3( 0, 0, 0 );\n            //define render\n            this.renderer = new THREE.WebGLRenderer();\n            this.renderer.setPixelRatio(window.devicePixelRatio);\n            this.renderer.setSize(this.width, this.height);\n            this.renderer.autoClear = false;\n            this.renderer.setClearColor(0x000000, 1);\n\n            //define texture\n            var video = settings.getTech(player);\n            this.supportVideoTexture = Detector.supportVideoTexture();\n            if(!this.supportVideoTexture){\n                this.helperCanvas = player.addChild(\"HelperCanvas\", {\n                    video: video,\n                    width: this.width,\n                    height: this.height\n                });\n                var context = this.helperCanvas.el();\n                this.texture = new THREE.Texture(context);\n            }else{\n                this.texture = new THREE.Texture(video);\n            }\n\n            video.style.display = \"none\";\n\n            this.texture.generateMipmaps = false;\n            this.texture.minFilter = THREE.LinearFilter;\n            this.texture.maxFilter = THREE.LinearFilter;\n            this.texture.format = THREE.RGBFormat;\n            //define geometry\n            var geometry = (this.videoType === \"equirectangular\")? new THREE.SphereGeometry(500, 60, 40): new THREE.SphereBufferGeometry( 500, 60, 40 ).toNonIndexed();\n            if(this.videoType === \"fisheye\"){\n                var normals = geometry.attributes.normal.array;\n                var uvs = geometry.attributes.uv.array;\n                for ( var i = 0, l = normals.length / 3; i < l; i ++ ) {\n                    var x = normals[ i * 3 + 0 ];\n                    var y = normals[ i * 3 + 1 ];\n                    var z = normals[ i * 3 + 2 ];\n\n                    var r = Math.asin(Math.sqrt(x * x + z * z) / Math.sqrt(x * x  + y * y + z * z)) / Math.PI;\n                    if(y < 0) r = 1 - r;\n                    var theta = (x == 0 && z == 0)? 0 : Math.acos(x / Math.sqrt(x * x + z * z));\n                    if(z < 0) theta = theta * -1;\n                    uvs[ i * 2 + 0 ] = -0.8 * r * Math.cos(theta) + 0.5;\n                    uvs[ i * 2 + 1 ] = 0.8 * r * Math.sin(theta) + 0.5;\n                }\n                geometry.rotateX( options.rotateX);\n                geometry.rotateY( options.rotateY);\n                geometry.rotateZ( options.rotateZ);\n            }\n            geometry.scale( - 1, 1, 1 );\n            //define mesh\n            this.mesh = new THREE.Mesh(geometry,\n                new THREE.MeshBasicMaterial({ map: this.texture})\n            );\n            //this.mesh.scale.x = -1;\n            this.scene.add(this.mesh);\n            this.el_ = this.renderer.domElement;\n            this.el_.classList.add('vjs-video-canvas');\n\n            options.el = this.el_;\n            baseComponent.call(this, player, options);\n\n            this.attachControlEvents();\n            this.player().on(\"play\", function () {\n                this.time = new Date().getTime();\n                this.animate();\n            }.bind(this));\n\n            if(options.callback) options.callback();\n        },\n\n        attachControlEvents: function(){\n            this.on('mousemove', this.handleMouseMove.bind(this));\n            this.on('touchmove', this.handleMouseMove.bind(this));\n            this.on('mousedown', this.handleMouseDown.bind(this));\n            this.on('touchstart',this.handleMouseDown.bind(this));\n            this.on('mouseup', this.handleMouseUp.bind(this));\n            this.on('touchend', this.handleMouseUp.bind(this));\n            if(this.settings.scrollable){\n                this.on('mousewheel', this.handleMouseWheel.bind(this));\n                this.on('MozMousePixelScroll', this.handleMouseWheel.bind(this));\n            }\n            this.on('mouseenter', this.handleMouseEnter.bind(this));\n            this.on('mouseleave', this.handleMouseLease.bind(this));\n        },\n\n        handleResize: function () {\n            this.width = this.player().el().offsetWidth, this.height = this.player().el().offsetHeight;\n            this.camera.aspect = this.width / this.height;\n            this.camera.updateProjectionMatrix();\n            this.renderer.setSize( this.width, this.height );\n        },\n\n        handleMouseUp: function(event){\n            this.mouseDown = false;\n            if(this.clickToToggle){\n                var clientX = event.clientX || event.changedTouches[0].clientX;\n                var clientY = event.clientY || event.changedTouches[0].clientY;\n                var diffX = Math.abs(clientX - this.onPointerDownPointerX);\n                var diffY = Math.abs(clientY - this.onPointerDownPointerY);\n                if(diffX < 0.1 && diffY < 0.1)\n                    this.player().paused() ? this.player().play() : this.player().pause();\n            }\n        },\n\n        handleMouseDown: function(event){\n            event.preventDefault();\n            var clientX = event.clientX || event.touches[0].clientX;\n            var clientY = event.clientY || event.touches[0].clientY;\n            this.mouseDown = true;\n            this.onPointerDownPointerX = clientX;\n            this.onPointerDownPointerY = clientY;\n            this.onPointerDownLon = this.lon;\n            this.onPointerDownLat = this.lat;\n        },\n\n        handleMouseMove: function(event){\n            var clientX = event.clientX || event.touches[0].clientX;\n            var clientY = event.clientY || event.touches[0].clientY;\n            if(this.settings.clickAndDrag){\n                if(this.mouseDown){\n                    this.lon = ( this.onPointerDownPointerX - clientX ) * 0.2 + this.onPointerDownLon;\n                    this.lat = ( clientY - this.onPointerDownPointerY ) * 0.2 + this.onPointerDownLat;\n                }\n            }else{\n                var x = event.pageX - this.el_.offsetLeft;\n                var y = event.pageY - this.el_.offsetTop;\n                this.lon = (x / this.width) * 430 - 225;\n                this.lat = (y / this.height) * -180 + 90;\n            }\n        },\n\n        handleMobileOrientation: function (event) {\n            if(typeof event.rotationRate === \"undefined\") return;\n            var x = event.rotationRate.alpha;\n            var y = event.rotationRate.beta;\n\n            if (window.matchMedia(\"(orientation: portrait)\").matches) {\n                this.lon = this.lon - y * this.settings.mobileVibrationValue;\n                this.lat = this.lat + x * this.settings.mobileVibrationValue;\n            }else if(window.matchMedia(\"(orientation: landscape)\").matches){\n                var orientationDegree = -90;\n                if(typeof window.orientation != \"undefined\"){\n                    orientationDegree = window.orientation;\n                }\n\n                this.lon = (orientationDegree == -90)? this.lon + x * this.settings.mobileVibrationValue : this.lon - x * this.settings.mobileVibrationValue;\n                this.lat = (orientationDegree == -90)? this.lat + y * this.settings.mobileVibrationValue : this.lat - y * this.settings.mobileVibrationValue;\n            }\n        },\n\n        handleMouseWheel: function(event){\n            event.stopPropagation();\n            event.preventDefault();\n            // WebKit\n            if ( event.wheelDeltaY ) {\n                this.camera.fov -= event.wheelDeltaY * 0.05;\n                // Opera / Explorer 9\n            } else if ( event.wheelDelta ) {\n                this.camera.fov -= event.wheelDelta * 0.05;\n                // Firefox\n            } else if ( event.detail ) {\n                this.camera.fov += event.detail * 1.0;\n            }\n            this.camera.fov = Math.min(this.settings.maxFov, this.camera.fov);\n            this.camera.fov = Math.max(this.settings.minFov, this.camera.fov);\n            this.camera.updateProjectionMatrix();\n        },\n\n        handleMouseEnter: function (event) {\n            this.isUserInteracting = true;\n        },\n\n        handleMouseLease: function (event) {\n            this.isUserInteracting = false;\n        },\n\n        animate: function(){\n            this.requestAnimationId = requestAnimationFrame( this.animate.bind(this) );\n            if(!this.player().paused()){\n                if(typeof(this.texture) !== \"undefined\" && (!this.isPlayOnMobile && this.player().readyState() === HAVE_ENOUGH_DATA || this.isPlayOnMobile && this.player().hasClass(\"vjs-playing\"))) {\n                    var ct = new Date().getTime();\n                    if (ct - this.time >= 30) {\n                        this.texture.needsUpdate = true;\n                        this.time = ct;\n                    }\n                    if(this.isPlayOnMobile){\n                        var currentTime = this.player().currentTime();\n                        if(MobileBuffering.isBuffering(currentTime)){\n                            if(!this.player().hasClass(\"vjs-panorama-mobile-inline-video-buffering\")){\n                                this.player().addClass(\"vjs-panorama-mobile-inline-video-buffering\");\n                            }\n                        }else{\n                            if(this.player().hasClass(\"vjs-panorama-mobile-inline-video-buffering\")){\n                                this.player().removeClass(\"vjs-panorama-mobile-inline-video-buffering\");\n                            }\n                        }\n                    }\n                }\n            }\n            this.render();\n        },\n\n        render: function(){\n            if(!this.isUserInteracting){\n                var symbolLat = (this.lat > this.settings.initLat)?  -1 : 1;\n                var symbolLon = (this.lon > this.settings.initLon)?  -1 : 1;\n                if(this.settings.backToVerticalCenter){\n                    this.lat = (\n                        this.lat > (this.settings.initLat - Math.abs(this.settings.returnStepLat)) &&\n                        this.lat < (this.settings.initLat + Math.abs(this.settings.returnStepLat))\n                    )? this.settings.initLat : this.lat + this.settings.returnStepLat * symbolLat;\n                }\n                if(this.settings.backToHorizonCenter){\n                    this.lon = (\n                        this.lon > (this.settings.initLon - Math.abs(this.settings.returnStepLon)) &&\n                        this.lon < (this.settings.initLon + Math.abs(this.settings.returnStepLon))\n                    )? this.settings.initLon : this.lon + this.settings.returnStepLon * symbolLon;\n                }\n            }\n            this.lat = Math.max( this.settings.minLat, Math.min( this.settings.maxLat, this.lat ) );\n            this.phi = THREE.Math.degToRad( 90 - this.lat );\n            this.theta = THREE.Math.degToRad( this.lon );\n            this.camera.target.x = 500 * Math.sin( this.phi ) * Math.cos( this.theta );\n            this.camera.target.y = 500 * Math.cos( this.phi );\n            this.camera.target.z = 500 * Math.sin( this.phi ) * Math.sin( this.theta );\n            this.camera.lookAt( this.camera.target );\n\n            if(!this.supportVideoTexture){\n                this.helperCanvas.update();\n            }\n            this.renderer.clear();\n            this.renderer.render( this.scene, this.camera );\n        },\n        \n        playOnMobile: function () {\n            this.isPlayOnMobile = true;\n            if(this.settings.autoMobileOrientation)\n                window.addEventListener('devicemotion', this.handleMobileOrientation.bind(this));\n        },\n\n        el: function(){\n            return this.el_;\n        }\n    }\n};\n\nmodule.exports = Canvas;\n\n\n\n// WEBPACK FOOTER //\n// src/scripts/lib/Canvas.js","/**\n * @author alteredq / http://alteredqualia.com/\n * @author mr.doob / http://mrdoob.com/\n */\n\nvar Detector = {\n\n    canvas: !! window.CanvasRenderingContext2D,\n    webgl: ( function () {\n\n        try {\n\n            var canvas = document.createElement( 'canvas' ); return !! ( window.WebGLRenderingContext && ( canvas.getContext( 'webgl' ) || canvas.getContext( 'experimental-webgl' ) ) );\n\n        } catch ( e ) {\n\n            return false;\n\n        }\n\n    } )(),\n    workers: !! window.Worker,\n    fileapi: window.File && window.FileReader && window.FileList && window.Blob,\n\n     Check_Version: function() {\n         var rv = -1; // Return value assumes failure.\n\n         if (navigator.appName == 'Microsoft Internet Explorer') {\n\n             var ua = navigator.userAgent,\n                 re = new RegExp(\"MSIE ([0-9]{1,}[\\\\.0-9]{0,})\");\n\n             if (re.exec(ua) !== null) {\n                 rv = parseFloat(RegExp.$1);\n             }\n         }\n         else if (navigator.appName == \"Netscape\") {\n             /// in IE 11 the navigator.appVersion says 'trident'\n             /// in Edge the navigator.appVersion does not say trident\n             if (navigator.appVersion.indexOf('Trident') !== -1) rv = 11;\n             else{\n                 var ua = navigator.userAgent;\n                 var re = new RegExp(\"Edge\\/([0-9]{1,}[\\\\.0-9]{0,})\");\n                 if (re.exec(ua) !== null) {\n                     rv = parseFloat(RegExp.$1);\n                 }\n             }\n         }\n\n         return rv;\n     },\n\n    supportVideoTexture: function () {\n        //ie 11 and edge 12 doesn't support video texture.\n        var version = this.Check_Version();\n        return (version === -1 || version >= 13);\n    },\n\n    getWebGLErrorMessage: function () {\n\n        var element = document.createElement( 'div' );\n        element.id = 'webgl-error-message';\n\n        if ( ! this.webgl ) {\n\n            element.innerHTML = window.WebGLRenderingContext ? [\n                'Your graphics card does not seem to support <a href=\"http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation\" style=\"color:#000\">WebGL</a>.<br />',\n                'Find out how to get it <a href=\"http://get.webgl.org/\" style=\"color:#000\">here</a>.'\n            ].join( '\\n' ) : [\n                'Your browser does not seem to support <a href=\"http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation\" style=\"color:#000\">WebGL</a>.<br/>',\n                'Find out how to get it <a href=\"http://get.webgl.org/\" style=\"color:#000\">here</a>.'\n            ].join( '\\n' );\n\n        }\n\n        return element;\n\n    },\n\n    addGetWebGLMessage: function ( parameters ) {\n\n        var parent, id, element;\n\n        parameters = parameters || {};\n\n        parent = parameters.parent !== undefined ? parameters.parent : document.body;\n        id = parameters.id !== undefined ? parameters.id : 'oldie';\n\n        element = Detector.getWebGLErrorMessage();\n        element.id = id;\n\n        parent.appendChild( element );\n\n    }\n\n};\n\n// browserify support\nif ( typeof module === 'object' ) {\n\n    module.exports = Detector;\n\n}\n\n\n// WEBPACK FOOTER //\n// src/scripts/lib/Detector.js","/**\n * Created by wensheng.yan on 5/23/16.\n */\nvar element = document.createElement('canvas');\nelement.className = \"vjs-video-helper-canvas\";\n\nvar HelperCanvas = function(baseComponent){\n    return {\n        constructor: function init(player, options){\n            this.videoElement = options.video;\n            this.width = options.width;\n            this.height = options.height;\n\n            element.width = this.width;\n            element.height = this.height;\n            element.style.display = \"none\";\n            options.el = element;\n\n\n            this.context = element.getContext('2d');\n            this.context.drawImage(this.videoElement, 0, 0, this.width, this.height);\n            baseComponent.call(this, player, options);\n        },\n        \n        getContext: function () {\n          return this.context;  \n        },\n        \n        update: function () {\n            this.context.drawImage(this.videoElement, 0, 0, this.width, this.height);\n        },\n\n        el: function () {\n            return element;\n        }\n    }\n};\n\nmodule.exports = HelperCanvas;\n\n\n// WEBPACK FOOTER //\n// src/scripts/lib/HelperCanvas.js","/**\n * Created by yanwsh on 6/6/16.\n */\nvar MobileBuffering = {\n    prev_currentTime: 0,\n    counter: 0,\n    \n    isBuffering: function (currentTime) {\n        if (currentTime == this.prev_currentTime) this.counter++;\n        else this.counter = 0;\n        this.prev_currentTime = currentTime;\n        if(this.counter > 10){\n            //not let counter overflow\n            this.counter = 10;\n            return true;\n        }\n        return false;\n    }\n};\n\nmodule.exports = MobileBuffering;\n\n\n// WEBPACK FOOTER //\n// src/scripts/lib/MobileBuffering.js","/**\n * Created by yanwsh on 4/4/16.\n */\n\nvar Notice = function(baseComponent){\n    var element = document.createElement('div');\n    element.className = \"vjs-video-notice-label\";\n\n    return {\n        constructor: function init(player, options){\n            if(typeof options.NoticeMessage == \"object\"){\n                element = options.NoticeMessage;\n                options.el = options.NoticeMessage;\n            }else if(typeof options.NoticeMessage == \"string\"){\n                element.innerHTML = options.NoticeMessage;\n                options.el = element;\n            }\n\n            baseComponent.call(this, player, options);\n        },\n\n        el: function () {\n            return element;\n        }\n    }\n};\n\nmodule.exports = Notice;\n\n\n// WEBPACK FOOTER //\n// src/scripts/lib/Notice.js","/**\n * Created by wensheng.yan on 4/4/16.\n */\nfunction whichTransitionEvent(){\n    var t;\n    var el = document.createElement('fakeelement');\n    var transitions = {\n        'transition':'transitionend',\n        'OTransition':'oTransitionEnd',\n        'MozTransition':'transitionend',\n        'WebkitTransition':'webkitTransitionEnd'\n    };\n\n    for(t in transitions){\n        if( el.style[t] !== undefined ){\n            return transitions[t];\n        }\n    }\n}\n\nfunction mobileAndTabletcheck() {\n    var check = false;\n    (function(a){if(/(android|bb\\d+|meego).+mobile|avantgo|bada\\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(a)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\\-(n|u)|c55\\/|capi|ccwa|cdm\\-|cell|chtm|cldc|cmd\\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\\-s|devi|dica|dmob|do(c|p)o|ds(12|\\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\\-|_)|g1 u|g560|gene|gf\\-5|g\\-mo|go(\\.w|od)|gr(ad|un)|haie|hcit|hd\\-(m|p|t)|hei\\-|hi(pt|ta)|hp( i|ip)|hs\\-c|ht(c(\\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\\-(20|go|ma)|i230|iac( |\\-|\\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\\/)|klon|kpt |kwc\\-|kyo(c|k)|le(no|xi)|lg( g|\\/(k|l|u)|50|54|\\-[a-w])|libw|lynx|m1\\-w|m3ga|m50\\/|ma(te|ui|xo)|mc(01|21|ca)|m\\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\\-2|po(ck|rt|se)|prox|psio|pt\\-g|qa\\-a|qc(07|12|21|32|60|\\-[2-7]|i\\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\\-|oo|p\\-)|sdk\\/|se(c(\\-|0|1)|47|mc|nd|ri)|sgh\\-|shar|sie(\\-|m)|sk\\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\\-|v\\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\\-|tdg\\-|tel(i|m)|tim\\-|t\\-mo|to(pl|sh)|ts(70|m\\-|m3|m5)|tx\\-9|up(\\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\\-|your|zeto|zte\\-/i.test(a.substr(0,4)))check = true})(navigator.userAgent||navigator.vendor||window.opera);\n    return check;\n}\n\nfunction isIos() {\n    return /iPhone|iPad|iPod/i.test(navigator.userAgent);\n}\n\nfunction isRealIphone() {\n    return /iPhone|iPod/i.test(navigator.platform);\n}\n\nmodule.exports = {\n    whichTransitionEvent: whichTransitionEvent,\n    mobileAndTabletcheck: mobileAndTabletcheck,\n    isIos: isIos,\n    isRealIphone: isRealIphone\n};\n\n\n// WEBPACK FOOTER //\n// src/scripts/lib/Util.js","/**\n * Created by yanwsh on 4/3/16.\n */\n'use strict';\n\nimport util from './lib/Util';\nimport Detector from './lib/Detector';\nimport makeVideoPlayableInline from 'iphone-inline-video';\n\nconst runOnMobile = (util.mobileAndTabletcheck());\n\n// Default options for the plugin.\nconst defaults = {\n    clickAndDrag: runOnMobile,\n    showNotice: true,\n    NoticeMessage: \"Please use your mouse drag and drop the video.\",\n    autoHideNotice: 3000,\n    //limit the video size when user scroll.\n    scrollable: true,\n    initFov: 75,\n    maxFov: 105,\n    minFov: 51,\n    //initial position for the video\n    initLat: 0,\n    initLon: -180,\n    //A float value back to center when mouse out the canvas. The higher, the faster.\n    returnStepLat: 0.5,\n    returnStepLon: 2,\n    backToVerticalCenter: !runOnMobile,\n    backToHorizonCenter: !runOnMobile,\n    clickToToggle: false,\n    \n    //limit viewable zoom\n    minLat: -85,\n    maxLat: 85,\n    videoType: \"equirectangular\",\n    \n    rotateX: 0,\n    rotateY: 0,\n    rotateZ: 0,\n    \n    autoMobileOrientation: false,\n    mobileVibrationValue: util.isIos()? 0.022 : 1\n};\n\nfunction playerResize(player){\n    var canvas = player.getChild('Canvas');\n    return function () {\n        player.el().style.width = window.innerWidth + \"px\";\n        player.el().style.height = window.innerHeight + \"px\";\n        canvas.handleResize();\n    };\n}\n\nfunction fullscreenOnIOS(player, clickFn) {\n    var resizeFn = playerResize(player);\n    player.controlBar.fullscreenToggle.off(\"tap\", clickFn);\n    player.controlBar.fullscreenToggle.on(\"tap\", function fullscreen() {\n        var canvas = player.getChild('Canvas');\n        if(!player.isFullscreen()){\n            //set to fullscreen\n            player.isFullscreen(true);\n            player.enterFullWindow();\n            resizeFn();\n            window.addEventListener(\"devicemotion\", resizeFn);\n        }else{\n            player.isFullscreen(false);\n            player.exitFullWindow();\n            player.el().style.width = \"\";\n            player.el().style.height = \"\";\n            canvas.handleResize();\n            window.removeEventListener(\"devicemotion\", resizeFn);\n        }\n    });\n}\n\n/**\n * Function to invoke when the player is ready.\n *\n * This is a great place for your plugin to initialize itself. When this\n * function is called, the player will have its DOM and child components\n * in place.\n *\n * @function onPlayerReady\n * @param    {Player} player\n * @param    {Object} [options={}]\n */\nconst onPlayerReady = (player, options, settings) => {\n    player.addClass('vjs-panorama');\n    if(!Detector.webgl){\n        PopupNotification(player, {\n            NoticeMessage: Detector.getWebGLErrorMessage(),\n            autoHideNotice: options.autoHideNotice\n        });\n        if(options.callback){\n            options.callback();\n        }\n        return;\n    }\n    player.addChild('Canvas', options);\n    var canvas = player.getChild('Canvas');\n    if(runOnMobile){\n        var videoElement = settings.getTech(player);\n        if(util.isRealIphone()){\n            makeVideoPlayableInline(videoElement, true);\n        }\n        if(util.isIos()){\n            fullscreenOnIOS(player, settings.getFullscreenToggleClickFn(player));\n        }\n        player.addClass(\"vjs-panorama-mobile-inline-video\");\n        player.removeClass(\"vjs-using-native-controls\");\n        canvas.playOnMobile();\n    }\n    if(options.showNotice){\n        player.on(\"playing\", function(){\n            PopupNotification(player, options);\n        });\n    }\n    canvas.hide();\n    player.on(\"play\", function () {\n        canvas.show();\n    });\n    player.on(\"fullscreenchange\", function () {\n        canvas.handleResize();\n    });\n};\n\nconst PopupNotification = (player, options = {\n    NoticeMessage: \"\"\n}) => {\n    var notice = player.addChild('Notice', options);\n\n    if(options.autoHideNotice > 0){\n        setTimeout(function () {\n            notice.addClass(\"vjs-video-notice-fadeOut\");\n            var transitionEvent = util.whichTransitionEvent();\n            var hide = function () {\n                notice.hide();\n                notice.removeClass(\"vjs-video-notice-fadeOut\");\n                notice.off(transitionEvent, hide);\n            };\n            notice.on(transitionEvent, hide);\n        }, options.autoHideNotice);\n    }\n};\n\nconst plugin = function(settings = {}){\n    /**\n     * A video.js plugin.\n     *\n     * In the plugin function, the value of `this` is a video.js `Player`\n     * instance. You cannot rely on the player being in a \"ready\" state here,\n     * depending on how the plugin is invoked. This may or may not be important\n     * to you; if not, remove the wait for \"ready\"!\n     *\n     * @function panorama\n     * @param    {Object} [options={}]\n     *           An object of options left to the plugin author to define.\n     */\n    const videoTypes = [\"equirectangular\", \"fisheye\"];\n    const panorama = function(options) {\n        if(settings.mergeOption) options = settings.mergeOption(defaults, options);\n        if(videoTypes.indexOf(options.videoType) == -1) defaults.videoType;\n        this.ready(() => {\n            onPlayerReady(this, options, settings);\n        });\n    };\n\n// Include the version number.\n    panorama.VERSION = '0.0.7';\n\n    return panorama;\n}\n\nexport default plugin;\n\n\n\n// WEBPACK FOOTER //\n// src/scripts/plugin.js","'use strict';\n\nimport Canvas  from './lib/Canvas';\nimport Notice  from './lib/Notice';\nimport HelperCanvas from './lib/HelperCanvas';\nimport panorama from './plugin';\n\nfunction getTech(player) {\n    return player.tech({ IWillNotUseThisInPlugins: true }).el();\n}\n\nfunction getFullscreenToggleClickFn(player) {\n    return player.controlBar.fullscreenToggle.handleClick\n}\n\nvar component = videojs.getComponent('Component');\nvar canvas = Canvas(component, {\n    getTech: getTech\n});\nvideojs.registerComponent('Canvas', videojs.extend(component, canvas));\n\nvar notice = Notice(component);\nvideojs.registerComponent('Notice', videojs.extend(component, notice));\n\nvar helperCanvas = HelperCanvas(component);\nvideojs.registerComponent('HelperCanvas', videojs.extend(component, helperCanvas));\n\n// Register the plugin with video.js.\n\nvideojs.plugin('panorama', panorama({\n    mergeOption: function (defaults, options) {\n        return videojs.mergeOptions(defaults, options);\n    },\n    getTech: getTech,\n    getFullscreenToggleClickFn: getFullscreenToggleClickFn\n}));\n\n\n\n// WEBPACK FOOTER //\n// src/scripts/plugin_v5.js","module.exports = $;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"$\"\n// module id = 83\n// module chunks = 0 2","module.exports = THREE;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"THREE\"\n// module id = 84\n// module chunks = 0 2","module.exports = videojs;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"videojs\"\n// module id = 85\n// module chunks = 0 2","\"use strict\";\r\n\r\nconst Point = require('./mPoint');\r\n\r\n//\r\n// Map utility\r\n//\r\nconst __FLT_EPSILON__ = 1e-10;\r\n\r\n/**\r\n *\r\n * @param value number\r\n * @param inputMin number\r\n * @param inputMax number\r\n * @param outputMin number\r\n * @param outputMax number\r\n * @param isClamp bool\r\n * @return {number}\r\n */\r\nfunction mmap(value, inputMin, inputMax, outputMin, outputMax, isClamp) {\r\n\r\n\tif (Math.abs(inputMin - inputMax) < __FLT_EPSILON__)\r\n\t{\r\n\t\treturn outputMin;\r\n\t}\r\n\telse\r\n\t{\r\n\t\tlet outVal = ((value - inputMin) / (inputMax - inputMin) * (outputMax - outputMin) + outputMin);\r\n\r\n\t\tif (isClamp)\r\n\t\t{\r\n\t\t\tif (outputMax < outputMin)\r\n\t\t\t{\r\n\t\t\t\tif (outVal < outputMax)\r\n\t\t\t\t\toutVal = outputMax;\r\n\t\t\t\telse if (outVal > outputMin)\r\n\t\t\t\t\toutVal = outputMin;\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\tif (outVal > outputMax)\r\n\t\t\t\t\toutVal = outputMax;\r\n\t\t\t\telse if (outVal < outputMin)\r\n\t\t\t\t\toutVal = outputMin;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn outVal;\r\n\t}\r\n\r\n}\r\n/**\r\n *\r\n * @param a number\r\n * @param min number\r\n * @param max number\r\n * @return {number}\r\n */\r\nfunction clamp(a, min, max )\r\n{\r\n\treturn (a < min) ? min : ((a > max) ? max : a);\r\n}\r\n\r\n/**\r\n * @param a angle in deg\r\n * @param min\r\n * @param max\r\n * max - min == 360\r\n * @return {number} angle in [min...max]\r\n */\r\nfunction alignAngle(a, min = -180, max = 180)\r\n{\r\n\twhile (a < min)\r\n\t\ta += 360;\r\n\twhile (a > max)\r\n\t\ta -= 360;\r\n\r\n\treturn a;\r\n}\r\n\r\n//\r\n// End map utility\r\n//\r\n\r\n/**\r\n *  Eight channel audio format.\r\n *\r\n *  Order of input angles:\r\n * @param yaw  yaw in angles\r\n * @param pitch pitch in angles\r\n * @param roll  roll in angles (default = 0)\r\n * @return {Array} volumes[8]\r\n */\r\nfunction eightChannelsAlgorithm(yaw, pitch, roll = 0)\r\n{\r\n\t//Orientation input safety clamps/alignment\r\n\tpitch = alignAngle(pitch, -180, 180);\r\n\tpitch = clamp(pitch, -90, 90); // -90, 90\r\n\r\n\tyaw = alignAngle(yaw, 0, 360);\r\n\r\n\troll = alignAngle(roll, -180, 180);\r\n\troll = clamp(roll, -90, 90); // -90, 90\r\n\r\n\tlet coefficients = [8];\r\n\tcoefficients[0] = 1. - Math.min(1., Math.min(360. - yaw, yaw) / 90.);\r\n\tcoefficients[1] = 1. - Math.min(1., Math.abs(90. - yaw) / 90.);\r\n\tcoefficients[2] = 1. - Math.min(1., Math.abs(180. - yaw) / 90.);\r\n\tcoefficients[3] = 1. - Math.min(1., Math.abs(270. - yaw) / 90.);\r\n\r\n\tlet tiltHigh = mmap(roll, -90., 90., 0., 1., true);\r\n\tlet tiltLow = 1. - tiltHigh;\r\n\r\n\t//ISSUE//\r\n\t//Able to kill stereo by making both pitch and tilt at max or min values together without proper clamps\r\n\r\n\tlet result = [];\r\n\tresult.length = 16;\r\n\tresult[0] = coefficients[0] * tiltHigh * 2.0; // 1 left\r\n\tresult[1] = coefficients[3] * tiltHigh * 2.0; //   right\r\n\tresult[2] = coefficients[1] * tiltLow * 2.0; // 2 left\r\n\tresult[3] = coefficients[0] * tiltLow * 2.0; //   right\r\n\tresult[4] = coefficients[3] * tiltLow * 2.0; // 3 left\r\n\tresult[5] = coefficients[2] * tiltLow * 2.0; //   right\r\n\tresult[6] = coefficients[2] * tiltHigh * 2.0; // 4 left\r\n\tresult[7] = coefficients[1] * tiltHigh * 2.0; //   right\r\n\r\n\tresult[0 + 8] = coefficients[0] * tiltLow * 2.0; // 1 left\r\n\tresult[1 + 8] = coefficients[3] * tiltLow * 2.0; //   right\r\n\tresult[2 + 8] = coefficients[1] * tiltHigh * 2.0; // 2 left\r\n\tresult[3 + 8] = coefficients[0] * tiltHigh * 2.0; //   right\r\n\tresult[4 + 8] = coefficients[3] * tiltHigh * 2.0; // 3 left\r\n\tresult[5 + 8] = coefficients[2] * tiltHigh * 2.0; //   right\r\n\tresult[6 + 8] = coefficients[2] * tiltLow * 2.0; // 4 left\r\n\tresult[7 + 8] = coefficients[1] * tiltLow * 2.0; //   right\r\n\r\n\tlet pitchHigherHalf = mmap(pitch, 90., -90., 0., 1., true);\r\n\tlet pitchLowerHalf = 1. - pitchHigherHalf;\r\n\r\n\tfor (let i = 0; i < 8; ++i) {\r\n\t\tresult[i] *= pitchLowerHalf;\r\n\t\tresult[i + 8] *= pitchHigherHalf;\r\n\t}\r\n\r\n\treturn result;\r\n}\r\n\r\n//\r\n//  Eight pairs audio format.\r\n//\r\n//  Order of input angles:\r\n//  Y = yaw in angles\r\n//  P = pitch in angles\r\n//  R = roll in angles\r\n//\r\n\r\nfunction eightPairsAlgorithm(yaw, pitch, roll) {\r\n\r\n\t//Orientation input safety clamps/alignment\r\n\tpitch = alignAngle(pitch, -180, 180);\r\n\tpitch = clamp(pitch, -90, 90); // -90, 90\r\n\r\n\tyaw = alignAngle(yaw, 0, 360);\r\n\r\n\tlet volumes = [8];\r\n\tvolumes[0] = 1. - Math.min(1., Math.min(360. - yaw, yaw) / 90.);\r\n\tvolumes[1] = 1. - Math.min(1., Math.abs(90. - yaw) / 90.);\r\n\tvolumes[2] = 1. - Math.min(1., Math.abs(180. - yaw) / 90.);\r\n\tvolumes[3] = 1. - Math.min(1., Math.abs(270. - yaw) / 90.);\r\n\r\n\tlet pitchHigherHalf = mmap(pitch, 90., -90., 0., 1., true);\r\n\tlet pitchLowerHalf = 1. - pitchHigherHalf;\r\n\r\n\tlet  result = [];\r\n\tresult.push(volumes[0] * pitchHigherHalf);\r\n\tresult.push(volumes[1] * pitchHigherHalf);\r\n\tresult.push(volumes[2] * pitchHigherHalf);\r\n\tresult.push(volumes[3] * pitchHigherHalf);\r\n\tresult.push(volumes[4] * pitchLowerHalf);\r\n\tresult.push(volumes[5] * pitchLowerHalf);\r\n\tresult.push(volumes[6] * pitchLowerHalf);\r\n\tresult.push(volumes[7] * pitchLowerHalf);\r\n\r\n\treturn result;\r\n}\r\n\r\n\r\nmodule.exports.eightPairsAlgorithm = eightPairsAlgorithm;\r\nmodule.exports.eightChannelsAlgorithm = eightChannelsAlgorithm;\r\n\n\n\n// WEBPACK FOOTER //\n// ./channelAlg.js","var AudioContext = global.AudioContext || global.webkitAudioContext;\nvar OfflineAudioContext = global.OfflineAudioContext || global.webkitOfflineAudioContext;\nvar BaseAudioContext = global.BaseAudioContext || (OfflineAudioContext && Object.getPrototypeOf(OfflineAudioContext));\n\nmodule.exports = typeof BaseAudioContext === \"function\" ? BaseAudioContext : AudioContext;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../~/base-audio-context/index.js\n// module id = 87\n// module chunks = 0 2"],"sourceRoot":""}